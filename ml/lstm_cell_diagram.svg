<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   viewBox="0 0 982 352.5"
   version="1.1"
   id="svg91"
   sodipodi:docname="lstm_cell_diagram.svg"
   width="982"
   height="352.5"
   inkscape:version="1.4 (e7c3feb1, 2024-10-09)"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview91"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:zoom="0.77824995"
     inkscape:cx="459.36399"
     inkscape:cy="426.59817"
     inkscape:window-width="1800"
     inkscape:window-height="1039"
     inkscape:window-x="0"
     inkscape:window-y="44"
     inkscape:window-maximized="1"
     inkscape:current-layer="svg91" />
  <defs
     id="defs12">
    <!-- Gradients for different components -->
    <linearGradient
       id="gateGrad"
       x1="0"
       y1="0"
       x2="0"
       y2="1">
      <stop
         offset="0%"
         style="stop-color:#F2E4C2;stop-opacity:1"
         id="stop1" />
      <stop
         offset="100%"
         style="stop-color:#D3B67A;stop-opacity:1"
         id="stop2" />
    </linearGradient>
    <!-- Activation: muted lavender -->
    <linearGradient
       id="activationGrad"
       x1="0"
       y1="0"
       x2="0"
       y2="1">
      <stop
         offset="0%"
         style="stop-color:#E3DDF6;stop-opacity:1"
         id="stop3" />
      <stop
         offset="100%"
         style="stop-color:#B9A6E6;stop-opacity:1"
         id="stop4" />
    </linearGradient>
    <!-- Cell state: soft sage -->
    <linearGradient
       id="cellStateGrad"
       x1="0"
       y1="0"
       x2="0"
       y2="1">
      <stop
         offset="0%"
         style="stop-color:#DDEEE4;stop-opacity:1"
         id="stop5" />
      <stop
         offset="100%"
         style="stop-color:#9BC8A7;stop-opacity:1"
         id="stop6" />
    </linearGradient>
    <!-- Hidden: calm teal -->
    <linearGradient
       id="hiddenGrad"
       x1="0"
       y1="0"
       x2="0"
       y2="1">
      <stop
         offset="0%"
         style="stop-color:#DCEFF2;stop-opacity:1"
         id="stop7" />
      <stop
         offset="100%"
         style="stop-color:#8BBCC6;stop-opacity:1"
         id="stop8" />
    </linearGradient>
    <!-- Input: pale rose -->
    <linearGradient
       id="inputGrad"
       x1="0"
       y1="0"
       x2="0"
       y2="1">
      <stop
         offset="0%"
         style="stop-color:#F3E0EB;stop-opacity:1"
         id="stop9" />
      <stop
         offset="100%"
         style="stop-color:#D8AFC3;stop-opacity:1"
         id="stop10" />
    </linearGradient>
    <!-- Arrow markers -->
    <marker
       id="arrowhead"
       markerWidth="8"
       markerHeight="6"
       refX="7"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 8,3 0,6 "
         fill="#374151"
         id="polygon10" />
    </marker>
    <marker
       id="cellArrow"
       markerWidth="10"
       markerHeight="7"
       refX="9"
       refY="3.5"
       orient="auto">
      <polygon
         points="0,0 10,3.5 0,7 "
         fill="#16a34a"
         id="polygon11" />
    </marker>
    <marker
       id="hiddenArrow"
       markerWidth="8"
       markerHeight="6"
       refX="7"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 8,3 0,6 "
         fill="#0891b2"
         id="polygon12" />
    </marker>
    <linearGradient
       inkscape:collect="always"
       xlink:href="#cellStateGrad"
       id="linearGradient93"
       x1="35.068226"
       y1="557.51324"
       x2="35.068226"
       y2="616.19885"
       gradientTransform="matrix(1.3972763,0,0,0.71567809,0,24)"
       gradientUnits="userSpaceOnUse" />
    <linearGradient
       inkscape:collect="always"
       xlink:href="#hiddenGrad"
       id="linearGradient94"
       x1="35.068226"
       y1="278.05798"
       x2="35.068226"
       y2="336.74359"
       gradientTransform="scale(1.3972763,0.71567809)"
       gradientUnits="userSpaceOnUse" />
    <linearGradient
       inkscape:collect="always"
       xlink:href="#inputGrad"
       id="linearGradient95"
       x1="35.068226"
       y1="417.78561"
       x2="35.068226"
       y2="476.47122"
       gradientTransform="scale(1.3972763,0.71567809)"
       gradientUnits="userSpaceOnUse" />
    <linearGradient
       inkscape:collect="always"
       xlink:href="#inputGrad"
       id="linearGradient96"
       x1="174"
       y1="224"
       x2="174"
       y2="276"
       gradientUnits="userSpaceOnUse" />
    <linearGradient
       inkscape:collect="always"
       xlink:href="#gateGrad"
       id="linearGradient97"
       x1="233.11324"
       y1="191.11311"
       x2="233.11324"
       y2="270.63669"
       gradientTransform="scale(1.2826384,0.77964295)"
       gradientUnits="userSpaceOnUse" />
    <linearGradient
       inkscape:collect="always"
       xlink:href="#activationGrad"
       id="linearGradient98"
       x1="327.88739"
       y1="210.01665"
       x2="327.88739"
       y2="250.29381"
       gradientTransform="scale(1.2786402,0.78208087)"
       gradientUnits="userSpaceOnUse" />
    <linearGradient
       inkscape:collect="always"
       xlink:href="#gateGrad"
       id="linearGradient99"
       x1="233.11324"
       y1="293.72421"
       x2="233.11324"
       y2="373.24777"
       gradientTransform="scale(1.2826384,0.77964295)"
       gradientUnits="userSpaceOnUse" />
    <linearGradient
       inkscape:collect="always"
       xlink:href="#activationGrad"
       id="linearGradient100"
       x1="327.88739"
       y1="312.30786"
       x2="327.88739"
       y2="352.58502"
       gradientTransform="scale(1.2786402,0.78208087)"
       gradientUnits="userSpaceOnUse" />
    <linearGradient
       inkscape:collect="always"
       xlink:href="#gateGrad"
       id="linearGradient101"
       x1="233.11324"
       y1="396.33527"
       x2="233.11324"
       y2="475.85886"
       gradientTransform="scale(1.2826384,0.77964295)"
       gradientUnits="userSpaceOnUse" />
    <linearGradient
       inkscape:collect="always"
       xlink:href="#activationGrad"
       id="linearGradient102"
       x1="327.88739"
       y1="414.59906"
       x2="327.88739"
       y2="454.87622"
       gradientTransform="scale(1.2786402,0.78208087)"
       gradientUnits="userSpaceOnUse" />
    <linearGradient
       inkscape:collect="always"
       xlink:href="#gateGrad"
       id="linearGradient103"
       x1="233.11324"
       y1="498.94635"
       x2="233.11324"
       y2="578.46991"
       gradientTransform="scale(1.2826384,0.77964295)"
       gradientUnits="userSpaceOnUse" />
    <linearGradient
       inkscape:collect="always"
       xlink:href="#activationGrad"
       id="linearGradient104"
       x1="327.88739"
       y1="516.89026"
       x2="327.88739"
       y2="557.16748"
       gradientTransform="scale(1.2786402,0.78208087)"
       gradientUnits="userSpaceOnUse" />
    <linearGradient
       inkscape:collect="always"
       xlink:href="#cellStateGrad"
       id="linearGradient105"
       x1="624"
       y1="359"
       x2="624"
       y2="411"
       gradientUnits="userSpaceOnUse" />
    <linearGradient
       inkscape:collect="always"
       xlink:href="#activationGrad"
       id="linearGradient106"
       x1="585.97406"
       y1="472.13788"
       x2="585.97406"
       y2="512.41504"
       gradientTransform="scale(1.2786402,0.78208087)"
       gradientUnits="userSpaceOnUse" />
    <linearGradient
       inkscape:collect="always"
       xlink:href="#cellStateGrad"
       id="linearGradient107"
       x1="679.17853"
       y1="508.60855"
       x2="679.17853"
       y2="567.29419"
       gradientTransform="scale(1.3972763,0.71567809)"
       gradientUnits="userSpaceOnUse" />
    <linearGradient
       inkscape:collect="always"
       xlink:href="#hiddenGrad"
       id="linearGradient108"
       x1="679.17853"
       y1="389.84009"
       x2="679.17853"
       y2="448.52567"
       gradientTransform="scale(1.3972763,0.71567809)"
       gradientUnits="userSpaceOnUse" />
  </defs>
  <!-- Background -->
  <!-- Title -->
  <!-- Input Section -->
  <g
     id="inputs"
     transform="translate(-49,-149)">
    <!-- Previous hidden state h(t-1) -->
    <rect
       x="50"
       y="200"
       width="80"
       height="40"
       rx="5"
       fill="url(#hiddenGrad)"
       stroke="#0891b2"
       stroke-width="2"
       id="rect13"
       style="fill:url(#linearGradient94)"
       ry="5" />
    <text
       x="90"
       y="225"
       text-anchor="middle"
       class="text-sm font-medium"
       fill="#ffffff"
       id="text13"
       style="fill:#000000;fill-opacity:1">h(t-1)</text>
    <!-- Current input x(t) -->
    <rect
       x="50"
       y="300"
       width="80"
       height="40"
       rx="5"
       fill="url(#inputGrad)"
       stroke="#ec4899"
       stroke-width="2"
       id="rect14"
       style="fill:url(#linearGradient95)"
       ry="5" />
    <text
       x="90"
       y="325"
       text-anchor="middle"
       class="text-sm font-medium"
       fill="#ffffff"
       id="text14"
       style="fill:#000000;fill-opacity:1">x(t)</text>
    <!-- Previous cell state C(t-1) -->
    <rect
       x="50"
       y="424"
       width="80"
       height="40"
       rx="5"
       fill="url(#cellStateGrad)"
       stroke="#16a34a"
       stroke-width="2"
       id="rect15"
       style="fill:url(#linearGradient93)"
       ry="5" />
    <text
       x="90"
       y="449"
       text-anchor="middle"
       class="text-sm font-medium"
       fill="#ffffff"
       id="text15"
       style="fill:#000000;fill-opacity:1">C(t-1)</text>
  </g>
  <!-- Concatenation Node -->
  <g
     id="concat"
     transform="translate(-49,-149)">
    <circle
       cx="200"
       cy="250"
       r="25"
       fill="url(#inputGrad)"
       stroke="#ec4899"
       stroke-width="2"
       id="circle15"
       style="fill:url(#linearGradient96)" />
    <text
       x="200"
       y="257"
       text-anchor="middle"
       class="text-sm font-medium"
       fill="#ffffff"
       id="text16"
       style="fill:#000000;fill-opacity:1">⊕</text>
    <text
       x="200"
       y="285"
       text-anchor="middle"
       class="text-xs"
       fill="#374151"
       id="text17">concat</text>
  </g>
  <!-- Forget Gate -->
  <g
     id="forget-gate"
     transform="translate(-49,-149)">
    <rect
       x="300"
       y="150"
       width="100"
       height="60"
       rx="8"
       fill="url(#gateGrad)"
       stroke="#f59e0b"
       stroke-width="2"
       id="rect17"
       style="fill:url(#linearGradient97)"
       ry="8" />
    <text
       x="350"
       y="175"
       text-anchor="middle"
       class="text-sm font-bold"
       fill="#92400e"
       id="text18">Forget Gate</text>
    <!-- Sigmoid activation -->
    <rect
       x="420"
       y="165"
       width="50"
       height="30"
       rx="5"
       fill="url(#activationGrad)"
       stroke="#8b5cf6"
       stroke-width="1.5"
       id="rect19"
       style="fill:url(#linearGradient98)"
       ry="5" />
    <text
       x="445"
       y="184"
       text-anchor="middle"
       class="text-sm font-medium"
       fill="#ffffff"
       id="text20"
       style="fill:#000000;fill-opacity:1">σ</text>
  </g>
  <!-- Input Gate -->
  <g
     id="input-gate"
     transform="translate(-49,-149)">
    <rect
       x="300"
       y="230"
       width="100"
       height="60"
       rx="8"
       fill="url(#gateGrad)"
       stroke="#f59e0b"
       stroke-width="2"
       id="rect20"
       style="fill:url(#linearGradient99)"
       ry="8" />
    <text
       x="350"
       y="255"
       text-anchor="middle"
       class="text-sm font-bold"
       fill="#92400e"
       id="text21">Input Gate</text>
    <!-- Sigmoid activation -->
    <rect
       x="420"
       y="245"
       width="50"
       height="30"
       rx="5"
       fill="url(#activationGrad)"
       stroke="#8b5cf6"
       stroke-width="1.5"
       id="rect22"
       style="fill:url(#linearGradient100)"
       ry="5" />
    <text
       x="445"
       y="264"
       text-anchor="middle"
       class="text-sm font-medium"
       fill="#ffffff"
       id="text23"
       style="fill:#000000;fill-opacity:1">σ</text>
  </g>
  <!-- Candidate Values -->
  <g
     id="candidate-gate"
     transform="translate(-49,-149)">
    <rect
       x="300"
       y="310"
       width="100"
       height="60"
       rx="8"
       fill="url(#gateGrad)"
       stroke="#f59e0b"
       stroke-width="2"
       id="rect23"
       style="fill:url(#linearGradient101)"
       ry="8" />
    <text
       x="350"
       y="335"
       text-anchor="middle"
       class="text-sm font-bold"
       fill="#92400e"
       id="text24">Candidate</text>
    <!-- Tanh activation -->
    <rect
       x="420"
       y="325"
       width="50"
       height="30"
       rx="5"
       fill="url(#activationGrad)"
       stroke="#8b5cf6"
       stroke-width="1.5"
       id="rect25"
       style="fill:url(#linearGradient102)"
       ry="5" />
    <text
       x="445"
       y="344"
       text-anchor="middle"
       class="text-sm font-medium"
       fill="#ffffff"
       id="text26"
       style="fill:#000000;fill-opacity:1">tanh</text>
  </g>
  <!-- Output Gate -->
  <g
     id="output-gate"
     transform="translate(-49,-149)">
    <rect
       x="300"
       y="390"
       width="100"
       height="60"
       rx="8"
       fill="url(#gateGrad)"
       stroke="#f59e0b"
       stroke-width="2"
       id="rect26"
       style="fill:url(#linearGradient103)"
       ry="8" />
    <text
       x="350"
       y="415"
       text-anchor="middle"
       class="text-sm font-bold"
       fill="#92400e"
       id="text27">Output Gate</text>
    <!-- Sigmoid activation -->
    <rect
       x="420"
       y="405"
       width="50"
       height="30"
       rx="5"
       fill="url(#activationGrad)"
       stroke="#8b5cf6"
       stroke-width="1.5"
       id="rect28"
       style="fill:url(#linearGradient104)"
       ry="5" />
    <text
       x="445"
       y="424"
       text-anchor="middle"
       class="text-sm font-medium"
       fill="#ffffff"
       id="text29"
       style="fill:#000000;fill-opacity:1">σ</text>
  </g>
  <!-- Element-wise Operations -->
  <g
     id="operations"
     transform="translate(-49,-149)">
    <!-- Forget operation (multiply) -->
    <circle
       cx="550"
       cy="344"
       r="20"
       fill="#ffffff"
       stroke="#374151"
       stroke-width="2"
       id="circle29" />
    <text
       x="550"
       y="351"
       text-anchor="middle"
       class="text-lg font-bold"
       fill="#374151"
       id="text30">×</text>
    <text
       x="550"
       y="380"
       text-anchor="middle"
       class="text-xs"
       fill="#374151"
       id="text31">forget</text>
    <!-- Input operation (multiply) -->
    <circle
       cx="550"
       cy="420"
       r="20"
       fill="#ffffff"
       stroke="#374151"
       stroke-width="2"
       id="circle31" />
    <text
       x="550"
       y="427"
       text-anchor="middle"
       class="text-lg font-bold"
       fill="#374151"
       id="text32">×</text>
    <text
       x="550"
       y="450"
       text-anchor="middle"
       class="text-xs"
       fill="#374151"
       id="text33">update</text>
    <!-- Cell state addition -->
    <circle
       cx="650"
       cy="385"
       r="25"
       fill="url(#cellStateGrad)"
       stroke="#16a34a"
       stroke-width="2"
       id="circle33"
       style="fill:url(#linearGradient105)" />
    <text
       x="648"
       y="389"
       text-anchor="middle"
       class="text-lg font-bold"
       fill="#ffffff"
       id="text34"
       style="fill:#000000;fill-opacity:1">+</text>
    <text
       x="650"
       y="420"
       text-anchor="middle"
       class="text-xs"
       fill="#374151"
       id="text35">new C(t)</text>
    <!-- Hidden state operations -->
    <circle
       cx="850"
       cy="300"
       r="20"
       fill="#ffffff"
       stroke="#374151"
       stroke-width="2"
       id="circle35" />
    <text
       x="850"
       y="307"
       text-anchor="middle"
       class="text-lg font-bold"
       fill="#374151"
       id="text36">×</text>
    <text
       x="850"
       y="330"
       text-anchor="middle"
       class="text-xs"
       fill="#374151"
       id="text37">output</text>
  </g>
  <!-- Cell state tanh -->
  <g
     id="cell-tanh"
     transform="translate(-49,-149)">
    <rect
       x="750"
       y="370"
       width="50"
       height="30"
       rx="5"
       fill="url(#activationGrad)"
       stroke="#8b5cf6"
       stroke-width="1.5"
       id="rect37"
       style="fill:url(#linearGradient106)"
       ry="5" />
    <text
       x="775"
       y="389"
       text-anchor="middle"
       class="text-sm font-medium"
       fill="#ffffff"
       id="text38"
       style="fill:#000000;fill-opacity:1">tanh</text>
  </g>
  <!-- Outputs -->
  <g
     id="outputs"
     transform="translate(-49,-149)">
    <!-- New cell state C(t) -->
    <rect
       x="950"
       y="365"
       width="80"
       height="40"
       rx="5"
       fill="url(#cellStateGrad)"
       stroke="#16a34a"
       stroke-width="2"
       id="rect38"
       style="fill:url(#linearGradient107)"
       ry="5" />
    <text
       x="990"
       y="390"
       text-anchor="middle"
       class="text-sm font-medium"
       fill="#ffffff"
       id="text39"
       style="fill:#000000;fill-opacity:1">C(t)</text>
    <!-- New hidden state h(t) -->
    <rect
       x="950"
       y="280"
       width="80"
       height="40"
       rx="5"
       fill="url(#hiddenGrad)"
       stroke="#0891b2"
       stroke-width="2"
       id="rect39"
       style="fill:url(#linearGradient108)"
       ry="5" />
    <text
       x="990"
       y="305"
       text-anchor="middle"
       class="text-sm font-medium"
       fill="#ffffff"
       id="text40"
       style="fill:#000000;fill-opacity:1">h(t)</text>
  </g>
  <!-- Data Flow Connections -->
  <g
     stroke="#374151"
     stroke-width="2"
     fill="none"
     marker-end="url(#arrowhead)"
     id="g56"
     transform="translate(-49,-149)">
    <!-- Input connections to concat -->
    <path
       d="m 130,220 h 45 v 20"
       id="path40" />
    <path
       d="m 130,320 h 45 v -60"
       id="path41" />
    <!-- Concat to all gates -->
    <path
       d="m 225,250 h 45 v -70 h 30"
       id="path42" />
    <path
       d="m 225,250 h 45 v 10 h 30"
       id="path43" />
    <path
       d="m 225,250 h 45 v 90 h 30"
       id="path44" />
    <path
       d="m 225,250 h 45 v 170 h 30"
       id="path45" />
    <!-- Gate outputs to operations -->
    <path
       d="m 470,180 h 42 v 150 h 18"
       id="path46"
       sodipodi:nodetypes="cccc" />
    <path
       d="m 470,260 h 18 v 150 h 42"
       id="path47"
       sodipodi:nodetypes="cccc" />
    <path
       d="m 470,340 h 30 v 90 h 30"
       id="path48" />
    <path
       d="m 470,420 h 50 V 280 h 310"
       id="path49" />
    <!-- Previous cell state to forget operation -->
    <path
       d="m 130,452 h 378 v -92 h 22"
       id="path50"
       sodipodi:nodetypes="cccc" />
    <!-- Operations to cell state -->
    <path
       d="m 570,342 h 50 v 33"
       id="path51"
       sodipodi:nodetypes="ccc" />
    <path
       d="m 570,420 h 50 v -25"
       id="path52" />
    <!-- New cell state flows -->
    <path
       d="m 675,385 h 75"
       id="path53" />
    <path
       d="m 800,385 h 30 v -75 0"
       id="path54" />
    <path
       d="m 675,385 h 45 v 95 h 270 v -75"
       id="path55" />
    <!-- Hidden state output -->
    <path
       d="m 870,300 h 80"
       id="path56" />
  </g>
  <!-- Cell State Flow (highlighted) -->
  <g
     stroke="#16a34a"
     stroke-width="3"
     fill="none"
     marker-end="url(#cellArrow)"
     opacity="0.8"
     id="g57"
     transform="translate(-49,-149)">
    <!-- Main cell state highway -->
    <path
       d="m 130,440 h 20 v 60 h 840 v -95"
       stroke-dasharray="5, 3"
       id="path57"
       sodipodi:nodetypes="ccccc" />
  </g>
  <!-- Information Flow Labels -->
  <g
     id="flow-labels"
     transform="translate(-49,-149)">
    <!-- Gate labels -->
    <text
       x="350"
       y="194"
       text-anchor="middle"
       class="text-xs"
       fill="#92400e"
       id="text58">What to forget?</text>
    <text
       x="350"
       y="274"
       text-anchor="middle"
       class="text-xs"
       fill="#92400e"
       id="text59">What to update?</text>
    <text
       x="350"
       y="354"
       text-anchor="middle"
       class="text-xs"
       fill="#92400e"
       id="text60">New values</text>
    <text
       x="350"
       y="434"
       text-anchor="middle"
       class="text-xs"
       fill="#92400e"
       id="text61">What to output?</text>
    <!-- Flow descriptions -->
    <text
       x="580"
       y="450"
       text-anchor="middle"
       class="text-xs"
       fill="#374151"
       id="text62">Element-wise operations</text>
  </g>
  <!-- Mathematical Equations Panel -->
  <!-- Legend -->
  <!-- Highlighting Classes -->
  <style
     id="style91">
    .highlight-forget { fill: url(#gateGrad) !important; stroke: #f59e0b !important; stroke-width: 3px !important; }
    .highlight-input { fill: url(#gateGrad) !important; stroke: #f59e0b !important; stroke-width: 3px !important; }
    .highlight-output { fill: url(#gateGrad) !important; stroke: #f59e0b !important; stroke-width: 3px !important; }
    .highlight-cell { fill: url(#cellStateGrad) !important; stroke: #16a34a !important; stroke-width: 3px !important; }
    .highlight-hidden { fill: url(#hiddenGrad) !important; stroke: #0891b2 !important; stroke-width: 3px !important; }
    .text-xs { font-size: 11px; }
    .text-sm { font-size: 13px; }
    .text-lg { font-size: 16px; }
    .text-xl { font-size: 18px; }
    .font-bold { font-weight: bold; }
    .font-semibold { font-weight: 600; }
    .font-medium { font-weight: 500; }
    .font-mono { font-family: monospace; }
  </style>
  <!-- JavaScript Interface -->
  <script
     id="script91"><![CDATA[
    function highlightGate(gate) {
      // Remove previous highlights
      document.querySelectorAll('[class*="highlight-"]').forEach(el => {
        el.className = el.className.replace(/highlight-\w+/g, '');
      });
      
      // Add highlight to specified gate
      if (gate) {
        const gateElement = document.getElementById(gate + '-gate');
        if (gateElement) {
          gateElement.classList.add('highlight-' + gate);
        }
      }
    }
    
    function highlightFlow(flowType) {
      // Implementation for highlighting different data flows
      const flows = {
        'cell': () => {
          document.querySelectorAll('[stroke="#16a34a"]').forEach(el => {
            el.style.opacity = '1';
            el.style.strokeWidth = '4';
          });
        },
        'hidden': () => {
          document.querySelectorAll('[stroke="#0891b2"]').forEach(el => {
            el.style.opacity = '1';
            el.style.strokeWidth = '3';
          });
        }
      };
      
      if (flows[flowType]) {
        flows[flowType]();
      }
    }
    
    window.lstmDiagram = {
      highlightGate,
      highlightFlow,
      clearHighlights: () => {
        highlightGate(null);
        document.querySelectorAll('[stroke]').forEach(el => {
          el.style.opacity = '';
          el.style.strokeWidth = '';
        });
      }
    };
  ]]></script>
</svg>
