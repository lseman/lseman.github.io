   <svg viewBox="0 0 650 280" class="w-full h-auto">
        <defs>
          <marker id="arrA" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,8 L8,4 z" fill="#64748b" />
          </marker>
          <linearGradient id="cellGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#f1f5f9"/>
            <stop offset="100%" style="stop-color:#e2e8f0"/>
          </linearGradient>
        </defs>

        <!-- Background cell -->
        <rect x="15" y="15" width="620" height="250" fill="url(#cellGrad)" stroke="#cbd5e1" stroke-width="2" rx="20" opacity="0.3"/>
        
        <!-- Input nodes -->
        <g class="inDot">
          <circle cx="50" cy="50" r="16"/>
          <circle cx="50" cy="220" r="16"/>
        </g>
        <g class="stateDot"><circle cx="50" cy="135" r="16"/></g>
        
        <!-- Input labels -->
        <text x="50" y="32" class="lbl" text-anchor="middle">x_t</text>
        <text x="50" y="242" class="lbl" text-anchor="middle">h_{t-1}</text>
        <text x="50" y="118" class="lbl" text-anchor="middle">c_{t-1}</text>

        <!-- Gates with better spacing and colors -->
        <g>
          <rect x="140" y="30"  width="120" height="40" class="sigmoid"/>
          <rect x="140" y="85"  width="120" height="40" class="sigmoid"/>
          <rect x="140" y="140" width="120" height="40" class="tanh-gate"/>
          <rect x="140" y="195" width="120" height="40" class="sigmoid"/>
          
          <text x="200" y="54" class="lbl" text-anchor="middle">Forget Gate</text>
          <text x="200" y="109" class="lbl" text-anchor="middle">Input Gate</text>
          <text x="200" y="164" class="lbl" text-anchor="middle">Candidate</text>
          <text x="200" y="219" class="lbl" text-anchor="middle">Output Gate</text>
        </g>

        <!-- Input connections with better routing -->
        <g class="wire" marker-end="url(#arrA)">
          <!-- x_t connections -->
          <path d="M66,50 H140"/>
          <path d="M100,50 V105 H140"/>
          <path d="M100,50 V160 H140"/>
          <path d="M100,50 V215 H140"/>
          
          <!-- h_{t-1} connections -->
          <path d="M66,220 H105 V215 H140"/>
          <path d="M105,220 V160 H140"/>
          <path d="M105,220 V105 H140"/>
          <path d="M105,220 V50 H140"/>
        </g>

        <!-- Peephole connections -->
        <g class="peephole" marker-end="url(#arrA)">
          <path d="M66,135 H140"/>
          <path d="M100,135 V50 H140"/>
          <path d="M100,135 V105 H140"/>
        </g>

        <!-- Cell state operations -->
        <circle cx="320" cy="50" r="16" class="multiply"/>
        <text x="320" y="56" class="lbl" text-anchor="middle">×</text>
        
        <circle cx="320" cy="160" r="16" class="multiply"/>
        <text x="320" y="166" class="lbl" text-anchor="middle">×</text>
        
        <circle cx="400" cy="105" r="16" class="add"/>
        <text x="400" y="111" class="lbl" text-anchor="middle">+</text>

        <!-- Cell state rail -->
        <g class="rail">
          <path d="M66,135 H304"/>
          <path d="M336,50 V105 H384"/>
          <path d="M336,160 V105 H384"/>
          <path d="M416,105 H520"/>
        </g>

        <!-- Gate to operation connections -->
        <g class="wire" marker-end="url(#arrA)">
          <path d="M260,50 H304"/>
          <path d="M260,105 V160 H304"/>
          <path d="M260,160 H304"/>
        </g>

        <!-- Output processing -->
        <rect x="520" y="85" width="80" height="40" class="tanh-gate"/>
        <text x="560" y="109" class="lbl" text-anchor="middle">tanh</text>
        
        <circle cx="560" cy="180" r="16" class="multiply"/>
        <text x="560" y="186" class="lbl" text-anchor="middle">×</text>

        <!-- Final connections -->
        <g class="wire" marker-end="url(#arrA)">
          <path d="M560,125 V164"/>
          <path d="M260,215 H544"/>
          <path d="M576,180 H620"/>
        </g>

        <!-- Output nodes -->
        <g class="stateDot">
          <circle cx="520" cy="105" r="12"/>
          <circle cx="620" cy="180" r="12"/>
        </g>
        
        <!-- Output labels -->
        <text x="520" y="125" class="lbl" text-anchor="middle">c_t</text>
        <text x="620" y="200" class="lbl" text-anchor="middle">h_t</text>
      </svg>