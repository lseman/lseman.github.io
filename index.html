<!doctype html>
<html lang="en" class="h-full">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Laio O. Seman — Academic Portfolio</title>
    <meta name="description"
        content="Researcher in Operations Research and Machine Learning. Projects, publications, and contact information for Laio O. Seman." />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/wordcloud@1.2.2/src/wordcloud2.js"></script>

    <style>
        /* =========================================================
 * Base tokens (light + dark)
 * ======================================================= */
        :root {
            color-scheme: light dark;

            /* Brand + surfaces */
            --brand: #10b981;
            /* emerald-500 */
            --brand-weak: rgba(16, 185, 129, .4);

            --ink: rgb(23 23 23);
            /* neutral-900 */
            --ink-weak: rgb(115 115 115);
            /* neutral-500 */
            --paper: #ffffff;
            --paper-weak: rgb(250 250 250);

            /* Links (OKLCH for nicer contrast ramps) */
            --link: oklch(52% 0.13 155);
            --link-weak: color-mix(in oklab, var(--link) 60%, transparent);

            /* Focus ring */
            --focus: var(--brand);
        }



        @media (prefers-color-scheme: dark) {
            :root {
                --ink: rgb(245 245 245);
                /* neutral-100 */
                --ink-weak: rgb(163 163 163);
                /* neutral-400 */
                --paper: rgb(12 12 12);
                --paper-weak: rgb(20 20 20);
                --link: oklch(75% 0.17 155);
                /* brighter for dark */
            }
        }

        /* =========================================================
 * Base element styling
 * ======================================================= */
        html {
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI",
                Roboto, "Helvetica Neue", Arial, "Noto Sans",
                "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
            background: var(--paper);
            color: var(--ink);
        }

        body {
            /*background: var(--paper);*/
            color: var(--ink);
        }

        /* Respect reduced motion */
        @media (prefers-reduced-motion: reduce) {

            *,
            *::before,
            *::after {
                animation-duration: 0.001ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.001ms !important;
                scroll-behavior: auto !important;
            }
        }

        /* =========================================================
 * Links & focus
 * ======================================================= */
        a {
            color: var(--link);
            text-decoration: underline;
            text-underline-offset: .18em;
            text-decoration-thickness: .06em;
            text-decoration-color: var(--link-weak);
        }

        a:hover {
            text-decoration-color: var(--link);
        }

        a:focus-visible {
            outline: 2px solid var(--focus);
            outline-offset: 2px;
            text-decoration-color: var(--focus);
        }

        /* Buttons / interactive */
        :where(button, [role="button"], a[role="button"]) {
            cursor: pointer;
        }

        :where(button, [role="button"], a[role="button"]):focus-visible {
            outline: 3px solid var(--focus);
            outline-offset: 2px;
        }

        /* Selection */
        ::selection {
            background: var(--brand-weak);
        }

        /* Media elements: prevent overflow */
        img,
        svg,
        video,
        canvas {
            max-inline-size: 100%;
            block-size: auto;
        }

        /* Typography rhythm */
        :where(h1, h2, h3) {
            line-height: 1.15;
            letter-spacing: -0.01em;
        }

        :where(p + p) {
            margin-block-start: .75rem;
        }

        /* =========================================================
 * Reusable UI helpers
 * ======================================================= */
        .section-card {
            background: var(--paper-weak);
            border: 1px solid color-mix(in oklab, currentColor 12%, transparent);
            border-radius: 1.5rem;
            box-shadow: 0 1px 0 rgba(0, 0, 0, .04);
        }

        .btn {
            display: inline-block;
            padding: .5rem 1rem;
            border-radius: 1rem;
            border: 1px solid color-mix(in oklab, currentColor 14%, transparent);
            background: color-mix(in oklab, var(--link) 5%, transparent);
        }

        .btn:hover {
            box-shadow: 0 4px 16px rgba(16, 185, 129, .15);
        }

        /* Optional: highlight current section link in nav */
        /* Active navigation link styling */
        header nav a[aria-current="page"] {
            text-decoration: underline;
            text-decoration-thickness: 2px;
            text-underline-offset: 4px;
            font-weight: 500;
        }

        /* Optional: smooth transition */
        header nav a {
            transition: all 0.2s ease;
        }

        /* =========================================================
        * Print
        * ======================================================= */
        @media print {
            @page {
                margin: 12mm;
            }


            body {
                color: #000;
            }

            header,
            .no-print {
                display: none !important;
            }

            a {
                text-decoration: none;
                color: inherit;
            }

            * {
                box-shadow: none !important;
            }
        }
    </style>


</head>

<body class="text-neutral-900 dark:text-neutral-100 antialiased">
    <div aria-hidden="true" style="position:fixed; inset:0; z-index:-1; background:
              linear-gradient(to bottom right, #121212, rgb(32 40 48), rgb(32 40 48));
              background-attachment:fixed;">
    </div>
    <div aria-hidden="true" style="position:fixed; inset:0; z-index:-1; opacity:.05;
              background:url('https://www.transparenttextures.com/patterns/noisy.png');">
    </div>
    <!-- Header -->
    <!-- Fixed header -->
    <header id="site-header" class="fixed inset-x-0 top-0 z-40 backdrop-blur bg-white/75 dark:bg-neutral-950/60 
         border-b border-neutral-200/70 dark:border-neutral-600/70">
        <div class="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between">
            <a href="#top" class="font-semibold tracking-tight text-xl">Laio O. Seman</a>
            <nav class="hidden sm:flex gap-6 text-sm">
                <a class="hover:underline" href="#about">About</a>
                <a class="hover:underline" href="#interests">Research</a>
                <a class="hover:underline" href="#latest-papers">Latest Papers</a>
                <a class="hover:underline" href="#projects">Projects</a>
                <a class="hover:underline" href="#github">GitHub</a>
                <a class="hover:underline" href="#publications">Publications</a>
                <a class="hover:underline" href="#contact">Contact</a>
            </nav>
        </div>
    </header>

    <!-- Spacer so content starts below header -->
    <div id="header-spacer" aria-hidden="true"></div>


    <!-- Hero -->
    <section id="top" class="relative overflow-hidden">
        <!-- SVG background -->
        <svg class="absolute inset-0 w-full h-full opacity-15 text-emerald-400 -z-0" xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 1200 400" preserveAspectRatio="xMidYMid slice">
            <g stroke="currentColor" stroke-width="1.5" fill="none">
                <!-- cluster left -->
                <polygon points="50,150 150,50 250,100 200,200" />
                <polygon points="120,280 200,220 260,300 180,340" />
                <polygon points="80,60 140,40 160,100 100,120" />
                <!-- cluster center -->
                <polygon points="500,100 560,60 620,120 580,180 520,160" />
                <polygon points="650,220 700,200 740,260 690,280" />
                <polygon points="580,300 640,320 600,360" />
                <!-- cluster right -->
                <polygon points="950,80 1020,50 1080,120 1000,160" />
                <polygon points="900,250 960,210 1040,260 970,320" />
                <polygon points="1100,200 1140,240 1080,280" />
            </g>
        </svg>

        <!-- Foreground content -->
        <div class="relative z-10 mx-auto max-w-6xl px-4 py-16 sm:py-24 grid md:grid-cols-2 gap-8 items-center">
            <div>
                <h1 class="text-3xl sm:text-5xl font-extrabold leading-tight tracking-tight">
                    Hello, I'm <span class="underline decoration-4 decoration-emerald-400/70 underline-offset-4">Laio O.
                        Seman</span>
                </h1>
                <p class="mt-5 text-base sm:text-lg text-neutral-600 dark:text-neutral-300 leading-relaxed">
                    Researcher and academic focused on <strong>Operations Research</strong> and
                    <strong>Machine Learning</strong>, with a particular interest in the synergy
                    between optimization and learning.
                </p>
                <!-- e.g., inside the Publications section title row -->
                <br>
                <div class="flex items-end justify-between gap-4 flex-wrap">
                    <h2 class="text-2xl sm:text-3xl font-bold tracking-tight"></h2>
                    <div id="scholar-metrics" class="text-xs text-neutral-500 dark:text-neutral-400">
                        <span id="sch-m-status">Loading metrics…</span>
                    </div>
                </div>

                <!-- CTA buttons -->
                <div class="mt-6 flex flex-wrap gap-3">
                    <a class="px-4 py-2 rounded-2xl shadow-sm border border-neutral-200 dark:border-neutral-600 hover:shadow transition hover:border-emerald-300/70"
                        href="#projects">View Projects</a>
                    <a class="px-4 py-2 rounded-2xl shadow-sm border border-neutral-200 dark:border-neutral-600 hover:shadow transition hover:border-emerald-300/70"
                        href="#publications">Publications</a>
                    <a class="px-4 py-2 rounded-2xl shadow-sm border border-neutral-200 dark:border-neutral-600 hover:shadow transition hover:border-emerald-300/70"
                        href="#contact">Get in touch</a>
                </div>
            </div>

            <!-- Logo / visual card -->
            <div class="relative">
                <div
                    class="aspect-[4/3] w-full rounded-3xl border border-neutral-200 dark:border-neutral-600 shadow-sm p-6 grid place-items-center">
                    <div class="text-center">
                        <img src="assets/logo.png" alt="Laio O. Seman"
                            class="mt-4 w-48 h-35 rounded-full mx-auto shadow-lg">
                        <p class="mt-3 text-sm uppercase tracking-widest text-neutral-500 dark:text-neutral-400">
                            Optimization × ML
                        </p>
                        <p class="mt-2 text-sm text-neutral-500 dark:text-neutral-400">
                            Branch-and-Price • Neural Networks • Time Series
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="relative w-full h-12 overflow-hidden">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 500" preserveAspectRatio="none"
            class="absolute top-0 left-0 w-full h-full text-emerald-400 opacity-10">
            <path fill="currentColor" d="M0,120 C240,40 480,80 720,60 C960,40 1200,80 1440,60 L1440,0 L0,0 Z"></path>
            <path fill="currentColor" opacity="0.5"
                d="M0,120 C360,80 480,40 720,80 C960,120 1080,40 1440,80 L1440,20 L0,20 Z"></path>
        </svg>
    </div>

    <!-- About -->
    <section id="about" class="mx-auto max-w-6xl px-4 py-12 sm:py-16">
        <h2 class="text-2xl sm:text-3xl font-bold tracking-tight">About</h2>
        <p class="mt-4 leading-relaxed text-neutral-700 dark:text-neutral-300">
            I'm a researcher and academic with a strong focus on Operations Research and Machine Learning. My work
            explores principled optimization methods and modern learning techniques to improve decision-making in
            engineering and real-world systems.
        </p>
    </section>


    <div class="relative w-full h-12 overflow-hidden">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 500" preserveAspectRatio="none"
            class="absolute top-0 left-0 w-full h-full text-emerald-400 opacity-10">
            <path fill="currentColor" d="M0,120 C240,40 480,80 720,60 C960,40 1200,80 1440,60 L1440,0 L0,0 Z"></path>
            <path fill="currentColor" opacity="0.5"
                d="M0,120 C360,80 480,40 720,80 C960,120 1080,40 1440,80 L1440,20 L0,20 Z"></path>
        </svg>
    </div>



    <!-- Research Interests -->
    <section id="interests" class="mx-auto max-w-6xl px-4 py-12 sm:py-16">
        <h2 class="text-2xl sm:text-3xl font-bold tracking-tight">Research Interests</h2>
        <div class="mt-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="rounded-3xl border border-neutral-200 dark:border-neutral-600 p-6 shadow-sm">
                <h3 class="text-lg font-semibold tracking-tight">Operations Research</h3>
                <p class="mt-1 text-sm text-neutral-500 dark:text-neutral-400">Branch-and-Price, Decomposition,
                    Large-Scale Optimization</p>
                <ul class="list-disc ms-5 mt-3 text-neutral-700 dark:text-neutral-300">
                    <li>Algorithm design for complex, large-scale problems.</li>
                    <li>Exact & heuristic methods with strong engineering focus.</li>
                    <li>Efficient implementations and reproducible research.</li>
                </ul>
            </div>
            <div class="rounded-3xl border border-neutral-200 dark:border-neutral-600 p-6 shadow-sm">
                <h3 class="text-lg font-semibold tracking-tight">Machine Learning</h3>
                <p class="mt-1 text-sm text-neutral-500 dark:text-neutral-400">Optimization-aware ML, Neural OR,
                    Learning to Decide</p>
                <ul class="list-disc ms-5 mt-3 text-neutral-700 dark:text-neutral-300">
                    <li>ML at the interface with optimization and control.</li>
                    <li>Deep learning to assist decision-making in engineering.</li>
                    <li>Graph learning and combinatorial structures.</li>
                </ul>
            </div>
            <div class="rounded-3xl border border-neutral-200 dark:border-neutral-600 p-6 shadow-sm">
                <h3 class="text-lg font-semibold tracking-tight">Time Series Forecasting</h3>
                <p class="mt-1 text-sm text-neutral-500 dark:text-neutral-400">Deep Learning, Sequence Modeling,
                    Multi-step Prediction</p>
                <ul class="list-disc ms-5 mt-3 text-neutral-700 dark:text-neutral-300">
                    <li>Neural architectures for temporal data and forecasting.</li>
                    <li>Attention mechanisms and transformer models for sequences.</li>
                    <li>Modular frameworks and scalable prediction systems.</li>
                </ul>
            </div>
        </div>

        <div class="mt-8">
            <!-- Topic Cloud -->
            <div class="flex items-end justify-between gap-4 flex-wrap">
                <h2 class="text-2xl sm:text-3xl font-bold tracking-tight">Research Topic Cloud</h2>
                <span id="cloud-status" class="text-xs text-neutral-500 dark:text-neutral-400">Waiting for
                    publications…</span>
            </div>
            <div class="mt-6 grid gap-6 md:grid-cols-3">
                <div class="md:col-span-2">
                    <canvas id="wordcloud"
                        class="w-full aspect-[16/9] rounded-3xl border border-neutral-200 dark:border-neutral-600"></canvas>
                </div>
                <div class="rounded-3xl border border-neutral-200 dark:border-neutral-600 p-6">
                    <h3 class="text-lg font-semibold tracking-tight">Top Terms</h3>
                    <ol id="top-terms" class="mt-3 space-y-2 text-sm"></ol>
                    <p class="mt-4 text-xs text-neutral-500 dark:text-neutral-400">
                        Built from titles, abstracts, and keywords.
                    </p>
                </div>
            </div>
        </div>

    </section>

    <div class="relative w-full h-12 overflow-hidden">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 500" preserveAspectRatio="none"
            class="absolute top-0 left-0 w-full h-full text-emerald-400 opacity-10">
            <path fill="currentColor" d="M0,120 C240,40 480,80 720,60 C960,40 1200,80 1440,60 L1440,0 L0,0 Z"></path>
            <path fill="currentColor" opacity="0.5"
                d="M0,120 C360,80 480,40 720,80 C960,120 1080,40 1440,80 L1440,20 L0,20 Z"></path>
        </svg>
    </div>



    <!-- Latest Papers -->
    <section id="latest-papers" class="mx-auto max-w-6xl px-4 py-12 sm:py-16">
        <div class="flex items-end justify-between gap-4 flex-wrap">
            <h2 class="text-2xl sm:text-3xl font-bold tracking-tight">Latest Papers</h2>
            <span id="latest-status" class="text-xs text-neutral-500 dark:text-neutral-400">Loading…</span>
        </div>
        <div id="latest-papers-grid" class="mt-6 grid gap-6 md:grid-cols-3"></div>
    </section>


    <div class="relative w-full h-12 overflow-hidden">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 500" preserveAspectRatio="none"
            class="absolute top-0 left-0 w-full h-full text-emerald-400 opacity-10">
            <path fill="currentColor" d="M0,120 C240,40 480,80 720,60 C960,40 1200,80 1440,60 L1440,0 L0,0 Z"></path>
            <path fill="currentColor" opacity="0.5"
                d="M0,120 C360,80 480,40 720,80 C960,120 1080,40 1440,80 L1440,20 L0,20 Z"></path>
        </svg>
    </div>




    <!-- Projects -->
    <section id="projects" class="mx-auto max-w-6xl px-4 py-12 sm:py-16">
        <div class="flex items-end justify-between gap-4 flex-wrap">
            <h2 class="text-2xl sm:text-3xl font-bold tracking-tight">Projects</h2>
            <div class="min-w-[220px]">
                <input id="search" placeholder="Search projects (e.g., LP, GNN, Python)"
                    class="w-full text-sm px-4 py-2 rounded-2xl border border-neutral-200 dark:border-neutral-600 bg-white/70 dark:bg-neutral-900/60 focus:outline-none focus:ring-2 focus:ring-emerald-400/60" />
            </div>
        </div>

        <!-- Row 1: two items -->
        <div class="mt-6 grid md:grid-cols-2 gap-6">
            <!-- Project: BALDES -->
            <article
                class="project group rounded-3xl border border-neutral-200 dark:border-neutral-600 p-6 shadow-sm hover:shadow transition"
                data-search="baldes vehicle routing vrp cvrp vrptw bucket graph labeling algorithm branch cut price operations research c++ optimization">
                <div class="flex items-center justify-between">
                    <h3 class="text-lg font-semibold tracking-tight">BALDES — Bucket Graph Labeling for Vehicle Routing
                    </h3>
                    <span class="text-xs text-neutral-500 dark:text-neutral-400">2024</span>
                </div>
                <p class="mt-2 text-neutral-700 dark:text-neutral-300">
                    Modern C++ implementation of Branch-Cut-and-Price bucket graph labeling algorithm for Vehicle
                    Routing Problems with state-of-the-art optimization techniques.
                </p>
                <div class="mt-3 flex flex-wrap gap-2">
                    <span
                        class="text-xs px-2 py-1 rounded-full border border-neutral-200 dark:border-neutral-600">C++</span>
                    <span
                        class="text-xs px-2 py-1 rounded-full border border-neutral-200 dark:border-neutral-600">Vehicle
                        Routing</span>
                    <span
                        class="text-xs px-2 py-1 rounded-full border border-neutral-200 dark:border-neutral-600">Operations
                        Research</span>
                    <span
                        class="text-xs px-2 py-1 rounded-full border border-neutral-200 dark:border-neutral-600">Branch-Cut-Price</span>
                </div>
                <div class="mt-4 flex flex-wrap gap-3">
                    <a class="text-sm underline decoration-emerald-400/70 underline-offset-4 hover:opacity-80"
                        href="https://github.com/lseman/baldes" target="_blank" rel="noreferrer">GitHub</a>
                    <a class="text-sm underline decoration-emerald-400/70 underline-offset-4 hover:opacity-80"
                        href="https://lseman.github.io/baldes" target="_blank" rel="noreferrer">Documentation</a>
                </div>
            </article>

            <!-- Project: IPyM -->
            <article
                class="project group rounded-3xl border border-neutral-200 dark:border-neutral-600 p-6 shadow-sm hover:shadow transition"
                data-search="ipym interior point method lp linear programming c++ python optimization 2024">
                <div class="flex items-center justify-between">
                    <h3 class="text-lg font-semibold tracking-tight">IPyM — Interior Point Method for LP (C++/Python)
                    </h3>
                    <span class="text-xs text-neutral-500 dark:text-neutral-400">2024–</span>
                </div>
                <p class="mt-2 text-neutral-700 dark:text-neutral-300">
                    A fast C++-based Interior Point Method library with Python bindings tailored for Linear Programming.
                </p>
                <div class="mt-3 flex flex-wrap gap-2">
                    <span
                        class="text-xs px-2 py-1 rounded-full border border-neutral-200 dark:border-neutral-600">Optimization</span>
                    <span
                        class="text-xs px-2 py-1 rounded-full border border-neutral-200 dark:border-neutral-600">LP</span>
                    <span
                        class="text-xs px-2 py-1 rounded-full border border-neutral-200 dark:border-neutral-600">C++</span>
                    <span
                        class="text-xs px-2 py-1 rounded-full border border-neutral-200 dark:border-neutral-600">Python</span>
                </div>
                <div class="mt-4 flex flex-wrap gap-3">
                    <a class="text-sm underline decoration-emerald-400/70 underline-offset-4 hover:opacity-80"
                        href="https://github.com/lseman/IPyM/" target="_blank" rel="noreferrer">GitHub</a>
                </div>
            </article>
        </div>

        <!-- Row 2: one full-width -->
        <div class="mt-6 grid md:grid-cols-2 gap-6">

            <!-- Project: ForeBlocks (full width) -->
            <article
                class="project group rounded-3xl border border-neutral-200 dark:border-neutral-600 p-6 shadow-sm hover:shadow transition">
                <div class="flex items-center justify-between">
                    <h3 class="text-lg font-semibold tracking-tight">ForeBlocks — Deep Learning Time Series Library</h3>
                    <span class="text-xs text-neutral-500 dark:text-neutral-400">2024</span>
                </div>
                <p class="mt-2 text-neutral-700 dark:text-neutral-300">
                    Flexible and modular PyTorch library for time series forecasting with multiple neural architectures
                    and strategies.
                </p>
                <div class="mt-3 flex flex-wrap gap-2">
                    <span
                        class="text-xs px-2 py-1 rounded-full border border-neutral-200 dark:border-neutral-600">PyTorch</span>
                    <span class="text-xs px-2 py-1 rounded-full border border-neutral-200 dark:border-neutral-600">Time
                        Series</span>
                    <span class="text-xs px-2 py-1 rounded-full border border-neutral-200 dark:border-neutral-600">Deep
                        Learning</span>
                </div>
                <div class="mt-4 flex flex-wrap gap-3">
                    <a class="text-sm underline decoration-emerald-400/70 underline-offset-4 hover:opacity-80"
                        href="https://github.com/lseman/foreblocks" target="_blank" rel="noreferrer">GitHub</a>
                    <a class="text-sm underline decoration-emerald-400/70 underline-offset-4 hover:opacity-80"
                        href="https://pypi.org/project/foreblocks/" target="_blank" rel="noreferrer">PyPI Package</a>
                </div>
            </article>
        </div>
    </section>

    <div class="relative w-full h-12 overflow-hidden">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 500" preserveAspectRatio="none"
            class="absolute top-0 left-0 w-full h-full text-emerald-400 opacity-10">
            <path fill="currentColor" d="M0,120 C240,40 480,80 720,60 C960,40 1200,80 1440,60 L1440,0 L0,0 Z"></path>
            <path fill="currentColor" opacity="0.5"
                d="M0,120 C360,80 480,40 720,80 C960,120 1080,40 1440,80 L1440,20 L0,20 Z"></path>
        </svg>
    </div>


    <!-- GitHub Highlights -->
    <section id="github" class="mx-auto max-w-6xl px-4 py-12 sm:py-16">
        <div class="flex items-end justify-between gap-4 flex-wrap">
            <h2 class="text-2xl sm:text-3xl font-bold tracking-tight">GitHub Highlights</h2>
            <span id="gh-status" class="text-xs text-neutral-500 dark:text-neutral-400">Loading…</span>
        </div>

        <div id="gh-list" class="mt-6 grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Filled by JS -->
        </div>

        <div class="mt-6">
            <a class="text-sm underline decoration-emerald-400/70 underline-offset-4 hover:opacity-80"
                href="https://github.com/lseman" target="_blank" rel="noreferrer">View full GitHub profile</a>
        </div>
    </section>

    <div class="relative w-full h-12 overflow-hidden">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 500" preserveAspectRatio="none"
            class="absolute top-0 left-0 w-full h-full text-emerald-400 opacity-10">
            <path fill="currentColor" d="M0,120 C240,40 480,80 720,60 C960,40 1200,80 1440,60 L1440,0 L0,0 Z"></path>
            <path fill="currentColor" opacity="0.5"
                d="M0,120 C360,80 480,40 720,80 C960,120 1080,40 1440,80 L1440,20 L0,20 Z"></path>
        </svg>
    </div>



    <!-- Publications -->
    <section id="publications" class="mx-auto max-w-6xl px-4 py-12 sm:py-16">
        <h2 class="text-2xl sm:text-3xl font-bold tracking-tight">Publications</h2>

        <!-- Auto-loaded latest publications -->
        <div class="mt-6 rounded-3xl border border-neutral-200 dark:border-neutral-600 p-6 shadow-sm">
            <div class="flex items-center justify-between gap-3 flex-wrap">
                <h3 class="text-lg font-semibold tracking-tight">Latest (auto)</h3>
                <span id="pub-status" class="text-xs text-neutral-500 dark:text-neutral-400">Loading…</span>
            </div>
            <ol id="pub-list" class="mt-4 space-y-3 list-decimal ms-5"></ol>
            <p id="pub-empty" class="mt-3 text-sm text-neutral-500 dark:text-neutral-400 hidden">No items found.</p>
        </div>

        <!-- Static links remain -->
        <div class="mt-6 grid gap-4">
            <a class="rounded-2xl p-5 border border-neutral-200 dark:border-neutral-600 hover:shadow transition block"
                href="https://scholar.google.com.br/citations?user=PFcaR_MAAAAJ" target="_blank" rel="noreferrer">
                <div class="flex items-center justify-between">
                    <span class="font-medium">All publications on Google Scholar</span>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                        class="h-4 w-4 opacity-70">
                        <path d="M14 3h7v7h-2V6.414l-9.293 9.293-1.414-1.414L17.586 5H14V3z" />
                        <path d="M5 5h6v2H7v10h10v-4h2v6H5V5z" />
                    </svg>
                </div>
            </a>
        </div>
    </section>

    <div class="relative w-full h-12 overflow-hidden">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 500" preserveAspectRatio="none"
            class="absolute top-0 left-0 w-full h-full text-emerald-400 opacity-10">
            <path fill="currentColor" d="M0,120 C240,40 480,80 720,60 C960,40 1200,80 1440,60 L1440,0 L0,0 Z"></path>
            <path fill="currentColor" opacity="0.5"
                d="M0,120 C360,80 480,40 720,80 C960,120 1080,40 1440,80 L1440,20 L0,20 Z"></path>
        </svg>
    </div>



    <!-- Collaboration -->
    <section id="collab" class="mx-auto max-w-6xl px-4 py-12 sm:py-16">
        <h2 class="text-2xl sm:text-3xl font-bold tracking-tight">Collaboration</h2>
        <p class="mt-4 leading-relaxed text-neutral-700 dark:text-neutral-300">
            I'm open to collaborative projects and research opportunities. If you're interested in combining efforts in
            Operations Research and Machine Learning, especially in decomposition contexts, feel free to reach out.
        </p>
    </section>

    <div class="relative w-full h-12 overflow-hidden">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 500" preserveAspectRatio="none"
            class="absolute top-0 left-0 w-full h-full text-emerald-400 opacity-10">
            <path fill="currentColor" d="M0,120 C240,40 480,80 720,60 C960,40 1200,80 1440,60 L1440,0 L0,0 Z"></path>
            <path fill="currentColor" opacity="0.5"
                d="M0,120 C360,80 480,40 720,80 C960,120 1080,40 1440,80 L1440,20 L0,20 Z"></path>
        </svg>
    </div>



    <!-- Contact -->
    <section id="contact" class="mx-auto max-w-6xl px-4 py-12 sm:py-16">
        <h2 class="text-2xl sm:text-3xl font-bold tracking-tight">Get in Touch</h2>
        <div class="mt-6 grid md:grid-cols-3 gap-6">

            <!-- Email -->
            <div class="rounded-3xl border border-neutral-200 dark:border-neutral-600 p-6 shadow-sm">
                <div class="flex items-center gap-2">
                    <!-- Mail icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-emerald-500" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M16 12H8m8 0l-8-8m8 8l-8 8" />
                    </svg>
                    <h3 class="text-lg font-semibold tracking-tight">Email</h3>
                </div>
                <p class="mt-1 text-sm text-neutral-500 dark:text-neutral-400">laio [at] gos.ufsc.br</p>
                <p class="mt-3 text-neutral-700 dark:text-neutral-300">
                    I try to respond promptly to academic and research inquiries.
                </p>
                <div class="mt-4">
                    <a class="text-sm underline decoration-emerald-400/70 underline-offset-4 hover:opacity-80"
                        href="mailto:laio@gos.ufsc.br">Send an email</a>
                </div>
            </div>

            <!-- GitHub -->
            <div class="rounded-3xl border border-neutral-200 dark:border-neutral-600 p-6 shadow-sm">
                <div class="flex items-center gap-2">
                    <!-- GitHub icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-emerald-500" viewBox="0 0 24 24"
                        fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M12 .5C5.65.5.5 5.65.5 12c0 5.1 3.3 9.4 7.9 10.9.6.1.8-.3.8-.6v-2.1c-3.2.7-3.9-1.5-3.9-1.5-.5-1.1-1.2-1.4-1.2-1.4-1-.7.1-.7.1-.7 1.1.1 1.7 1.1 1.7 1.1 1 .1.8-.3.8-.6-.6-1.1-.8-2.5-.8-2.5 0-1.3.5-2.5 1.3-3.3-.1-.3-.5-1.4.1-2.9 0 0 1-.3 3.3 1.3.9-.2 1.9-.3 2.9-.3 1 0 2 .1 2.9.3 2.3-1.6 3.3-1.3 3.3-1.3.6 1.5.2 2.6.1 2.9.8.8 1.3 2 1.3 3.3 0 1.3-.3 2.4-.8 3.4 0 .3-.2.6.8.6.1 0 .5-.3.8-.6 4.6-1.5 7.9-5.8 7.9-10.9C23.5 5.65 18.35.5 12 .5Z"
                            clip-rule="evenodd" />
                    </svg>
                    <h3 class="text-lg font-semibold tracking-tight">GitHub</h3>
                </div>
                <p class="mt-1 text-sm text-neutral-500 dark:text-neutral-400">github.com/lseman</p>
                <p class="mt-3 text-neutral-700 dark:text-neutral-300">
                    Code, experiments, and open-source releases.
                </p>
                <div class="mt-4 flex gap-4">
                    <a class="text-sm underline decoration-emerald-400/70 underline-offset-4 hover:opacity-80"
                        href="https://github.com/lseman" target="_blank" rel="noreferrer">Profile</a>
                    <a class="text-sm underline decoration-emerald-400/70 underline-offset-4 hover:opacity-80"
                        href="https://github.com/lseman/IPyM" target="_blank" rel="noreferrer">IPyM repo</a>
                </div>
            </div>

            <!-- LinkedIn -->
            <div class="rounded-3xl border border-neutral-200 dark:border-neutral-600 p-6 shadow-sm">
                <div class="flex items-center gap-2">
                    <!-- LinkedIn icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-emerald-500" viewBox="0 0 24 24"
                        fill="currentColor">
                        <path
                            d="M4.98 3.5C4.98 4.9 3.9 6 2.5 6S0 4.9 0 3.5 1.1 1 2.5 1s2.48 1.1 2.48 2.5zM.5 8.5h4V24h-4V8.5zm7.5 0h3.9v2.1h.1c.5-.9 1.7-2.1 3.7-2.1 4 0 4.7 2.7 4.7 6.2V24h-4v-7.7c0-1.8 0-4.1-2.5-4.1s-2.9 2-2.9 4v7.8h-4V8.5z" />
                    </svg>
                    <h3 class="text-lg font-semibold tracking-tight">LinkedIn</h3>
                </div>
                <p class="mt-1 text-sm text-neutral-500 dark:text-neutral-400">linkedin.com/in/lseman</p>
                <p class="mt-3 text-neutral-700 dark:text-neutral-300">
                    Professional profile and networking.
                </p>
                <div class="mt-4">
                    <a class="text-sm underline decoration-emerald-400/70 underline-offset-4 hover:opacity-80"
                        href="https://www.linkedin.com/in/lseman/" target="_blank" rel="noreferrer">View LinkedIn</a>
                </div>
            </div>

        </div>
    </section>


    <!-- Footer -->
    <footer class="bg-[#121212] border-t border-neutral-200 dark:border-neutral-600 mt-12">
        <div class="mx-auto max-w-6xl px-4 py-10 text-sm flex flex-col sm:flex-row items-center justify-between gap-3">
            <p class="text-neutral-400">© <span id="year"></span> Laio O. Seman</p>
            <div class="flex gap-5 no-print">
                <a class="hover:opacity-80" href="#top">Back to top</a>
                <a class="hover:opacity-80" href="#contact">Contact</a>
            </div>
        </div>
    </footer>

    <script>
        // year
        document.getElementById('year').textContent = new Date().getFullYear();
        // project search
        const input = document.getElementById('search');
        const items = Array.from(document.querySelectorAll('.project'));
        input.addEventListener('input', () => {
            const q = input.value.trim().toLowerCase();
            items.forEach(card => {
                const hay = card.getAttribute('data-search') || card.textContent.toLowerCase();
                card.style.display = (!q || hay.includes(q)) ? '' : 'none';
            });
        });
    </script>

    <!-- Fallback publications JSON (edit as needed or replace with /publications.json in your repo) -->
    <script type="application/json" id="pub-fallback">{
    "items": [
      {
        "title": "Graph Neural Networks for Nanosatellite Task Scheduling",
        "year": 2023,
        "venue": "arXiv",
        "url": "https://arxiv.org/abs/2303.13773",
        "authors": ["Laio O. Seman", "…"]
      }
    ]
  }</script>

    <script>
        // === Publications Auto-Loader ===
        // Strategy:
        // 1) Try Semantic Scholar API (client-side, CORS-enabled) using an author search.
        // 2) If that fails, try loading /publications.json from your repo.
        // 3) If that fails, fall back to the embedded JSON in #pub-fallback.

        const STATUS = document.getElementById('pub-status');
        const LIST = document.getElementById('pub-list');
        const EMPTY = document.getElementById('pub-empty');
        const LATEST_GRID = document.getElementById('latest-papers-grid');
        const LATEST_STATUS = document.getElementById('latest-status');

        function truncate(text, maxLength) {
            if (!text) return '';
            return text.length > maxLength ? text.slice(0, maxLength) + '...' : text;
        }

        function renderLatest3(items) {
            if (!LATEST_GRID) return;

            const latest3 = items
                .sort((a, b) => (b.year || 0) - (a.year || 0))
                .slice(0, 3);

            LATEST_GRID.innerHTML = latest3.map(p => {
                const venue = [p.venue, p.year].filter(Boolean).join(' · ');
                const abstract = truncate(p.abstract || p.tldr, 200);
                const authors = Array.isArray(p.authors) ? p.authors.slice(0, 3).join(', ') + (p.authors.length > 3 ? ' et al.' : '') : (p.authors || '');

                return `
            <article
                class="project group rounded-3xl border border-neutral-200 dark:border-neutral-600 p-6 shadow-sm hover:shadow transition">
                <h3 class="text-lg font-semibold mb-2">
                    <a class="text-white-600 dark:text-white-400 hover:underline decoration-emerald-400/70 underline-offset-4" 
                       href="${p.url || '#'}" target="_blank" rel="noreferrer">
                        ${p.title || 'Untitled'}
                    </a>
                </h3>
                ${venue ? `<p class="text-sm text-neutral-600 dark:text-neutral-400 mb-2">${venue}</p>` : ''}
                ${authors ? `<p class="text-xs text-neutral-500 dark:text-neutral-400 mb-3">${authors}</p>` : ''}
                ${abstract ? `<p class="text-sm text-neutral-700 dark:text-neutral-300 leading-relaxed">${abstract}</p>` : ''}
                ${p.citationCount ? `<p class="text-xs text-neutral-500 dark:text-neutral-400 mt-3">${p.citationCount} citations</p>` : ''}
            </article>
        `;
            }).join('');

            if (LATEST_STATUS) LATEST_STATUS.textContent = 'Loaded';
        }

        function renderPublications(items) {
            LIST.innerHTML = '';
            if (!items || !items.length) {
                EMPTY.classList.remove('hidden');
                STATUS.textContent = 'No data';
                return;
            }
            EMPTY.classList.add('hidden');
            const top = items
                .sort((a, b) => (b.year || 0) - (a.year || 0))
                .slice(0, 8);
            for (const p of top) {
                const li = document.createElement('li');
                const title = p.title || 'Untitled';
                const url = p.url || '#';
                const year = p.year ? ` (${p.year})` : '';
                const abstract = p.abstract || p.tldr || '';
                const venue = p.venue ? ` — ${p.venue}` : '';
                const authors = Array.isArray(p.authors) ? p.authors.join(', ') : (p.authors || '');
                li.innerHTML = `<a class="underline decoration-emerald-400/70 underline-offset-4 hover:opacity-80" href="${url}" target="_blank" rel="noreferrer">${title}</a>${year}${venue}${authors ? `<div class=\"text-xs text-neutral-500 dark:text-neutral-400\">${authors}</div>` : ''}`;
                LIST.appendChild(li);

                // print p
                console.log({
                    title: title,
                    year: p.year,
                    venue: p.venue,
                    abstract: abstract,
                    url: url,
                    authors: authors
                });
            }
            STATUS.textContent = 'Loaded';

            renderLatest3(items);
            buildAndRenderCloudFrom(items);

        }

        // Shared author data for both scripts
        let cachedAuthorData = null;

        async function trySemanticScholar() {
            // Find authorId by name (you can hardcode if you know it to avoid ambiguity)
            const authorQuery = encodeURIComponent('Laio O. Seman');
            const searchUrl = `https://api.semanticscholar.org/graph/v1/author/search?query=${authorQuery}&limit=5&fields=name,affiliations,authorId,citationCount,hIndex`;
            const sr = await fetch(searchUrl, { headers: { 'Accept': 'application/json' } });
            if (!sr.ok) throw new Error('author search failed');
            const sj = await sr.json();
            const candidate = (sj?.data || []).find(a => /laio/i.test(a.name || '')) || (sj?.data || [])[0];
            if (!candidate?.authorId) throw new Error('no authorId');

            // Store author data for metrics script
            cachedAuthorData = candidate;

            const papersUrl = `https://api.semanticscholar.org/graph/v1/author/${candidate.authorId}/papers?limit=20&fields=title,year,venue,url,authors,externalIds,abstract,citationCount`;
            const pr = await fetch(papersUrl, { headers: { 'Accept': 'application/json' } });
            if (!pr.ok) throw new Error('papers fetch failed');
            const pj = await pr.json();
            const items = (pj?.data || []).map(p => ({
                title: p.title,
                year: p.year,
                venue: p.venue,
                abstract: p.abstract || p.tldr,
                url: p.url || (p.externalIds?.ArXiv ? `https://arxiv.org/abs/${p.externalIds.ArXiv}` : ''),
                authors: (p.authors || []).map(a => a.name)
            }));
            return items;
        }

        async function tryRepoJson() {
            // Optional: create /publications.json in your repo with schema { items: [...] }
            const r = await fetch('./publications.json', { cache: 'no-store' });
            if (!r.ok) throw new Error('no repo json');
            const j = await r.json();
            return j.items || [];
        }

        function tryEmbeddedJson() {
            try {
                const raw = document.getElementById('pub-fallback')?.textContent || '{}';
                const j = JSON.parse(raw);
                return j.items || [];
            } catch (_) {
                return [];
            }
        }

        // Publications loader
        (async () => {
            try {
                STATUS.textContent = 'Fetching (Semantic Scholar)…';
                const items = await trySemanticScholar();
                renderPublications(items);
            } catch (e1) {
                try {
                    STATUS.textContent = 'Fetching (publications.json)…';
                    const items = await tryRepoJson();
                    renderPublications(items);
                } catch (e2) {
                    STATUS.textContent = 'Using embedded fallback';
                    const items = tryEmbeddedJson();
                    renderPublications(items);
                }
            }
        })();

        // === Scholar Metrics ===
        (async function loadScholarMetrics() {
            const MOUNT = document.getElementById('scholar-metrics');
            const METRICS_STATUS = document.getElementById('sch-m-status');
            if (!MOUNT) return;

            // --- config ---
            const AUTHOR_NAME = 'Laio O. Seman';
            const CACHE_KEY = 'scholar_metrics_cache_v1';
            const TTL_MS = 24 * 60 * 60 * 1000;   // 1 day

            function render({ hIndex, citationCount, paperCount, url }) {
                const parts = [];
                if (citationCount != null) parts.push(`Citations: <strong>${citationCount.toLocaleString?.() ?? citationCount}</strong>`);
                if (hIndex != null) parts.push(`h-index: <strong>${hIndex}</strong>`);
                if (paperCount != null) parts.push(`papers: <strong>${paperCount}</strong>`);
                MOUNT.innerHTML = parts.join(' • ');
            }

            // --- cache check ---
            try {
                const cached = JSON.parse(localStorage.getItem(CACHE_KEY) || 'null');
                if (cached && (Date.now() - cached.ts) < TTL_MS) {
                    render(cached.data);
                    return;
                }
            } catch { }

            // Wait a bit to see if we can reuse author data from publications script
            await new Promise(resolve => setTimeout(resolve, 100));

            // --- fetch from Semantic Scholar (CORS-friendly) ---
            async function findAuthorByName(name) {
                // Try to reuse cached author data first
                if (cachedAuthorData && cachedAuthorData.authorId) {
                    return cachedAuthorData;
                }

                const q = encodeURIComponent(name);
                const url = `https://api.semanticscholar.org/graph/v1/author/search?query=${q}&limit=5&fields=name,authorId,citationCount,hIndex,affiliations,url`;
                const r = await fetch(url, { headers: { Accept: 'application/json' } });
                if (!r.ok) throw new Error('author search failed');
                const j = await r.json();
                const candidates = j?.data || [];
                return candidates.find(a => /laio/i.test(a?.name || '')) || candidates[0];
            }

            async function getAuthorDetails(id) {
                const url = `https://api.semanticscholar.org/graph/v1/author/${id}?fields=name,url,citationCount,hIndex,paperCount`;
                const r = await fetch(url, { headers: { Accept: 'application/json' } });
                if (!r.ok) throw new Error('author details failed');
                return await r.json();
            }

            try {
                if (METRICS_STATUS) METRICS_STATUS.textContent = 'Fetching (Semantic Scholar)…';
                const author = await findAuthorByName(AUTHOR_NAME);
                if (!author?.authorId) throw new Error('no authorId');

                const detail = await getAuthorDetails(author.authorId);
                const data = {
                    hIndex: detail.hIndex ?? author.hIndex ?? null,
                    citationCount: detail.citationCount ?? author.citationCount ?? null,
                    paperCount: detail.paperCount ?? null,
                    url: detail.url ?? author.url ?? ''
                };

                render(data);
                try { localStorage.setItem(CACHE_KEY, JSON.stringify({ ts: Date.now(), data })); } catch { }
            } catch (err) {
                // Fallback / message
                if (METRICS_STATUS) METRICS_STATUS.textContent = 'Metrics unavailable';
            }
        })();
    </script>

    <script>
        // === GitHub Top-Starred Loader ===
        const GH_USER = 'lseman';
        const GH_STATUS = document.getElementById('gh-status');
        const GH_LIST = document.getElementById('gh-list');

        function fmtDate(iso) {
            try { return new Date(iso).toLocaleDateString(); } catch { return ''; }
        }

        function renderRepos(repos) {
            GH_LIST.innerHTML = '';
            if (!repos || !repos.length) {
                GH_STATUS.textContent = 'No repositories';
                return;
            }
            const top = repos
                .filter(r => !r.fork)
                .sort((a, b) => (b.stargazers_count || 0) - (a.stargazers_count || 0))
                .slice(0, 6);
            for (const r of top) {
                const card = document.createElement('article');
                card.className = 'rounded-3xl border border-neutral-200 dark:border-neutral-600 p-6 shadow-sm hover:shadow transition';
                card.innerHTML = `
          <div class="flex items-start justify-between gap-3">
            <h3 class="text-lg font-semibold tracking-tight"><a class="hover:opacity-80" href="${r.html_url}" target="_blank" rel="noreferrer">${r.name}</a></h3>
            <div class="text-xs flex items-center gap-1 text-neutral-600 dark:text-neutral-300" title="Stars">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-4 w-4"><path d="M12 .587l3.668 7.431L24 9.753l-6 5.847 1.416 8.263L12 19.771l-7.416 4.092L6 15.6 0 9.753l8.332-1.735z"/></svg>
              ${(r.stargazers_count || 0)}
            </div>
          </div>
          <p class="mt-2 text-sm text-neutral-700 dark:text-neutral-300">${r.description || ''}</p>
          <div class="mt-3 flex items-center gap-4 text-xs text-neutral-600 dark:text-neutral-400">
            ${r.language ? `<span class="inline-flex items-center gap-1"><span class="h-2 w-2 rounded-full inline-block bg-neutral-400"></span>${r.language}</span>` : ''}
            ${r.updated_at ? `<span>Updated ${fmtDate(r.updated_at)}</span>` : ''}
          </div>
        `;
                GH_LIST.appendChild(card);
            }
            GH_STATUS.textContent = 'Loaded';
        }

        async function tryGitHubAPI() {
            const url = `https://api.github.com/users/${GH_USER}/repos?per_page=100&sort=updated`;
            const r = await fetch(url, {
                headers: { 'Accept': 'application/vnd.github+json' }
            });
            if (!r.ok) throw new Error('github api');
            return await r.json();
        }

        async function tryLocalReposJson() {
            const r = await fetch('./repos.json', { cache: 'no-store' });
            if (!r.ok) throw new Error('no repos.json');
            return (await r.json()).items || [];
        }

        function tryEmbeddedRepos() {
            try {
                const raw = document.getElementById('repos-fallback')?.textContent || '{}';
                const j = JSON.parse(raw);
                return j.items || [];
            } catch { return []; }
        }

        (async () => {
            try {
                GH_STATUS.textContent = 'Fetching (GitHub API)…';
                const repos = await tryGitHubAPI();
                renderRepos(repos);
            } catch (e1) {
                try {
                    GH_STATUS.textContent = 'Fetching (repos.json)…';
                    const repos = await tryLocalReposJson();
                    renderRepos(repos);
                } catch (e2) {
                    GH_STATUS.textContent = 'Using embedded fallback';
                    const repos = tryEmbeddedRepos();
                    renderRepos(repos);
                }
            }
        })();
    </script>


    <script>
        (function () {
            const header = document.getElementById('site-header');
            const links = Array.from(document.querySelectorAll('header nav a[href^="#"]'));
            const secs = links
                .map(a => document.getElementById(a.getAttribute('href').slice(1)))
                .filter(Boolean);

            if (!header || !links.length || !secs.length) return;

            // Cache for performance
            let cachedHeaderHeight = 0;
            let isScrolling = false;
            let scrollTimeout = null;

            const setActive = (id) => {
                // Use a more efficient approach - only update if changed
                const currentActive = document.querySelector('header nav a[aria-current="page"]');
                const newActive = document.querySelector(`header nav a[href="#${CSS.escape(id)}"]`);

                if (currentActive === newActive) return; // No change needed

                if (currentActive) currentActive.removeAttribute('aria-current');
                if (newActive) newActive.setAttribute('aria-current', 'page');
            };

            const getHeaderHeight = () => {
                // Cache header height to avoid repeated calculations
                if (cachedHeaderHeight === 0) {
                    cachedHeaderHeight = header.offsetHeight || 0;
                }
                return cachedHeaderHeight;
            };

            const resetHeaderHeight = () => {
                cachedHeaderHeight = 0;
            };

            // Improved scoring algorithm for better section detection
            const pickMostVisible = () => {
                const topPad = getHeaderHeight() + 16; // Slightly more padding for better UX
                let bestSection = null;
                let bestScore = -Infinity;

                for (const section of secs) {
                    const rect = section.getBoundingClientRect();
                    const vh = window.innerHeight;

                    // Skip sections that are completely out of view
                    if (rect.bottom < topPad || rect.top > vh) continue;

                    const visibleTop = Math.max(rect.top, topPad);
                    const visibleBottom = Math.min(rect.bottom, vh);
                    const visibleHeight = Math.max(0, visibleBottom - visibleTop);

                    if (visibleHeight <= 0) continue;

                    // Improved scoring: prioritize sections that are prominently visible
                    const totalHeight = rect.height;
                    const visibilityRatio = visibleHeight / totalHeight;
                    const centerDistance = Math.abs((rect.top + rect.bottom) / 2 - vh / 2) / vh;
                    const topDistance = Math.abs(rect.top - topPad) / vh;

                    // Weighted score: visibility ratio is most important, then center proximity, then top proximity
                    const score = visibilityRatio * 2 - centerDistance * 0.5 - topDistance * 0.3;

                    if (score > bestScore) {
                        bestScore = score;
                        bestSection = section;
                    }
                }

                if (bestSection) setActive(bestSection.id);
            };

            let observer = null;

            const buildObserver = () => {
                if (observer) observer.disconnect();

                const topPad = getHeaderHeight() + 16;

                observer = new IntersectionObserver((entries) => {
                    // Only process if we're not actively scrolling (debounce)
                    if (isScrolling) return;

                    const intersecting = entries
                        .filter(e => e.isIntersecting && e.intersectionRatio > 0.05)
                        .map(e => {
                            const rect = e.target.getBoundingClientRect();
                            return {
                                id: e.target.id,
                                topDistance: Math.abs(rect.top - topPad),
                                ratio: e.intersectionRatio,
                                rect: rect
                            };
                        })
                        .sort((a, b) => {
                            // Prioritize sections closer to the top padding
                            const topDiff = a.topDistance - b.topDistance;
                            if (Math.abs(topDiff) < 50) {
                                // If close in top distance, prefer higher intersection ratio
                                return b.ratio - a.ratio;
                            }
                            return topDiff;
                        });

                    if (intersecting.length > 0) {
                        setActive(intersecting[0].id);
                    } else {
                        // Fallback for edge cases
                        requestAnimationFrame(pickMostVisible);
                    }
                }, {
                    root: null,
                    rootMargin: `-${topPad}px 0px -40% 0px`, // Less aggressive bottom margin
                    threshold: [0, 0.1, 0.3, 0.5, 0.7, 0.9, 1]
                });

                for (const section of secs) {
                    observer.observe(section);
                }
            };

            // Debounced scroll handler for smoother performance
            const handleScroll = () => {
                isScrolling = true;

                if (scrollTimeout) clearTimeout(scrollTimeout);

                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                    pickMostVisible();
                }, 100); // Reduced debounce time for better responsiveness
            };

            // More efficient resize observer
            const resizeObserver = new ResizeObserver(() => {
                resetHeaderHeight();
                buildObserver();
                // Immediate update after resize
                requestAnimationFrame(pickMostVisible);
            });

            resizeObserver.observe(header);

            // Event listeners with better performance
            window.addEventListener('scroll', handleScroll, { passive: true });

            // Handle initial load
            window.addEventListener('load', () => {
                buildObserver();
                requestAnimationFrame(pickMostVisible);
            }, { once: true });

            // Handle hash changes
            window.addEventListener('hashchange', () => {
                const id = location.hash.slice(1);
                if (id && secs.some(s => s.id === id)) {
                    setActive(id);
                }
            });

            // Smooth click handling with immediate feedback
            for (const link of links) {
                link.addEventListener('click', (e) => {
                    const targetId = link.getAttribute('href').slice(1);
                    const targetSection = document.getElementById(targetId);

                    if (targetSection) {
                        // Immediate visual feedback
                        setActive(targetId);

                        // Disable scroll detection briefly to prevent conflicts
                        isScrolling = true;
                        setTimeout(() => {
                            isScrolling = false;
                        }, 300); // Slightly longer to account for scroll animation
                    }
                });
            }

            // Initialize immediately if DOM is ready
            if (document.readyState === 'complete') {
                buildObserver();
                requestAnimationFrame(pickMostVisible);
            }
        })();
    </script>
    <script>
        // ------------------ Word Cloud Helpers ------------------
        const CLOUD_CANVAS_ID = 'wordcloud';
        const CLOUD_STATUS = document.getElementById('cloud-status');
        const TOP_TERMS_OL = document.getElementById('top-terms');

        // English + Portuguese basic stopwords (extend as desired)
        const STOP = new Set((
            `a,an,and,are,as,at,be,by,for,from,has,have,in,is,its,of,on,or,that,the,to,was,were,with,via,using,into,through,
     do,does,did,not,can,could,may,might,will,would,should,we,you,they,our,this,these,those,over,under,between,within,
     um,uma,uns,umas,o,a,os,as,de,da,do,das,dos,em,no,na,nos,nas,por,para,com,sem,que,ao,à,aos,às,como,mais,menos,
     sobre,entre,contra,desde,até,também,ser,estar,ter,foi,foram,é,são,um,uma,se,ou`
        ).split(/\s*,\s*/).filter(Boolean));

        const TOKENIZE_RE = /[A-Za-zÀ-ÖØ-öø-ÿ0-9\-]+/g;

        function normalizeToken(t) {
            return t.toLowerCase().replace(/^[\-\_]+|[\-\_]+$/g, '');
        }

        function buildCorpus(items) {
            const texts = [];
            for (const p of (items || [])) {
                const parts = [];
                if (p.title) parts.push(p.title);
                if (p.abstract) parts.push(p.abstract);
                if (p.tldr) parts.push(p.tldr);
                if (Array.isArray(p.keywords)) parts.push(p.keywords.join(' '));
                // Optional: include venue as weak signal
                // if (p.venue) parts.push(p.venue);
                texts.push(parts.join(' '));
            }
            return texts.join(' ');
        }

        function computeFrequencies(text, { minLen = 3 } = {}) {
            const counts = new Map();
            const tokens = (text.match(TOKENIZE_RE) || []).map(normalizeToken);
            for (const tok of tokens) {
                if (!tok || tok.length < minLen) continue;
                if (STOP.has(tok)) continue;
                // de-emphasize numeric-heavy tokens
                const digits = (tok.match(/\d/g) || []).length;
                if (digits >= Math.ceil(tok.length * 0.5)) continue;
                counts.set(tok, (counts.get(tok) || 0) + 1);
            }
            // merge plural/singular simple heuristic
            for (const [w, c] of Array.from(counts.entries())) {
                if (w.endsWith('s')) {
                    const base = w.replace(/s$/, '');
                    if (counts.has(base)) {
                        counts.set(base, counts.get(base) + c);
                        counts.delete(w);
                    }
                }
            }
            return counts;
        }

        function topN(counts, n = 30, minCount = 2) {
            return Array.from(counts.entries())
                .filter(([, c]) => c >= minCount)
                .sort((a, b) => b[1] - a[1])
                .slice(0, n);
        }

        function renderTopTerms(list, data) {
            if (!list) return;
            list.innerHTML = '';
            for (const [term, count] of data.slice(0, 15)) {
                const li = document.createElement('li');
                li.innerHTML = `<span class="inline-block px-2 py-0.5 rounded-full border border-neutral-200 dark:border-neutral-600
                       me-2 text-xs">${count}</span>${term}`;
                list.appendChild(li);
            }
        }

        function renderWordCloud(pairs) {
            const canvas = document.getElementById(CLOUD_CANVAS_ID);
            if (!canvas || !window.WordCloud) return;

            // Match pixel buffer to CSS box
            const rect = canvas.getBoundingClientRect();
            const ratio = window.devicePixelRatio || 1;
            canvas.width = rect.width * ratio;
            canvas.height = rect.height * ratio;

            // Scale so text isn't blurry
            const ctx = canvas.getContext("2d");
            ctx.setTransform(ratio, 0, 0, ratio, 0, 0);

            const max = pairs.length ? Math.max(...pairs.map(([, w]) => w)) : 1;
            const list = pairs.map(([t, w]) => [t, Math.max(8, Math.round(8 + 40 * (w / max)))]);

            WordCloud(canvas, {
                list,
                gridSize: Math.round(8 * ratio),
                shrinkToFit: true,
                drawOutOfBound: false,
                backgroundColor: 'transparent',
                origin: [rect.width / 2, rect.height / 2], // <-- force center
                color: () => getComputedStyle(document.documentElement).getPropertyValue('--ink')?.trim() || '#222',
            });
        }


        // Public function you can call from your existing pipeline
        function buildAndRenderCloudFrom(items) {
            try {
                if (CLOUD_STATUS) CLOUD_STATUS.textContent = 'Building…';
                const corpus = buildCorpus(items);
                const counts = computeFrequencies(corpus, { minLen: 3 });
                const pairs = topN(counts, 60, 2); // up to 60 terms, min count 2
                renderTopTerms(TOP_TERMS_OL, pairs);
                renderWordCloud(pairs);
                if (CLOUD_STATUS) CLOUD_STATUS.textContent = 'Loaded';
            } catch (e) {
                if (CLOUD_STATUS) CLOUD_STATUS.textContent = 'Unavailable';
                console.error('Word cloud error:', e);
            }
        }
    </script>


</body>

</html>