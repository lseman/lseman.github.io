<!doctype html>
<html lang="en" class="h-full">
<!--
  Academic Portfolio for Laio O. Seman
  
  ⚠️ IMPORTANT: For best results, serve this page from a web server (not file://)
  
  Quick local server options:
  - Python: python -m http.server 8000
  - Node.js: npx http-server
  - PHP: php -S localhost:8000
  
  Then open: http://localhost:8000
  
  To avoid API rate limits, create a 'publications.json' file in the same directory:
  
  [
    {
      "title": "Your Paper Title",
      "year": 2024,
      "venue": "Conference/Journal Name",
      "url": "https://...",
      "authors": ["Author 1", "Author 2"],
      "abstract": "Paper abstract...",
      "citationCount": 10
    }
  ]
  
  The page will automatically use this file if APIs are unavailable.
  Data is cached for 6 hours (publications) and 1 hour (GitHub repos) after successful loads.
-->

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Laio O. Seman — Academic Portfolio</title>
  <meta name="description"
    content="Researcher in Operations Research and Machine Learning. Projects, publications, and contact information for Laio O. Seman." />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Sora:wght@400;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/wordcloud@1.2.2/src/wordcloud2.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.17.1/matter.min.js"></script>

  <style>
    :root {
      --brand: #0891b2;
      --brand-light: #06b6d4;
      --brand-dark: #0e7490;
      
      --ink: #0f172a;
      --ink-light: #1e293b;
      --ink-lighter: #475569;
      --paper: #ffffff;
      --surface: #f8fafc;

      --shadow-sm: 0 1px 2px rgba(15, 23, 42, .05);
      --shadow-md: 0 4px 6px -1px rgba(15, 23, 42, .08), 0 2px 4px -1px rgba(15, 23, 42, .06);
      --shadow-lg: 0 10px 15px -3px rgba(15, 23, 42, .1), 0 4px 6px -2px rgba(15, 23, 42, .05);
      --shadow-xl: 0 20px 25px -5px rgba(15, 23, 42, .12), 0 10px 10px -5px rgba(15, 23, 42, .04);
      
      --grid-color: rgba(8, 145, 178, .08);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, sans-serif;
      color: var(--ink);
      background: var(--surface);
      scroll-behavior: smooth;
      overflow-x: hidden;
    }

    body {
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Typography */
    h1, h2, h3, h4 {
      font-family: 'Sora', sans-serif;
      letter-spacing: -0.02em;
      font-weight: 700;
      line-height: 1.2;
    }

    h1 { font-size: clamp(2.75rem, 5vw, 4rem) !important; }
    h2 { font-size: clamp(2rem, 4vw, 2.75rem) !important; }
    h3 { font-size: clamp(1.25rem, 2.5vw, 1.5rem) !important; }

    .mono {
      font-family: 'JetBrains Mono', monospace;
      letter-spacing: -0.01em;
    }

    /* Container */
    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }

    /* Glass header */
    header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(12px) saturate(180%);
      border-bottom: 1px solid rgba(15, 23, 42, 0.08);
      box-shadow: var(--shadow-sm);
      transition: all 0.3s ease;
    }

    header.scrolled {
      background: rgba(255, 255, 255, 0.95);
      box-shadow: var(--shadow-md);
    }

    header nav a {
      position: relative;
      color: var(--ink-lighter);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.875rem;
      transition: color 0.3s ease;
    }

    header nav a::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--brand);
      transition: width 0.3s ease;
    }

    header nav a:hover {
      color: var(--brand);
    }

    header nav a:hover::after {
      width: 100%;
    }

    header nav a[aria-current="page"] {
      color: var(--brand-dark);
      font-weight: 600;
    }

    /* Enhanced cards */
    .card {
      position: relative;
      background: white;
      border: 1px solid rgba(15, 23, 42, 0.08);
      border-radius: 1rem;
      box-shadow: var(--shadow-sm);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      overflow: hidden;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
      border-color: rgba(8, 145, 178, 0.2);
    }

    /* Badge redesign - cleaner */
    .badge {
      display: inline-flex;
      align-items: center;
      padding: 0.5rem 0.875rem;
      background: white;
      border: 1px solid rgba(15, 23, 42, 0.12);
      border-radius: 0.5rem;
      font-size: 0.8125rem;
      font-weight: 500;
      color: var(--ink-lighter);
      box-shadow: var(--shadow-sm);
      transition: all 0.25s ease;
    }

    .badge:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
      border-color: var(--brand);
      color: var(--brand);
    }

    .badge-fall {
      position: absolute;
      top: -100px;
      left: 0;
      opacity: 1;
      cursor: default;
      pointer-events: none;
    }

    /* Buttons - solid colors */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.875rem 1.5rem;
      border-radius: 0.75rem;
      font-weight: 600;
      font-size: 0.9375rem;
      text-decoration: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: none;
      cursor: pointer;
    }

    .btn-primary {
      background: var(--brand);
      color: white;
      box-shadow: var(--shadow-md);
    }

    .btn-primary:hover {
      background: var(--brand-dark);
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .btn-secondary {
      background: white;
      color: var(--ink);
      border: 1px solid rgba(15, 23, 42, 0.15);
      box-shadow: var(--shadow-sm);
    }

    .btn-secondary:hover {
      transform: translateY(-2px);
      border-color: var(--brand);
      color: var(--brand);
      box-shadow: var(--shadow-md);
    }

    /* Icon containers - solid */
    .icon-box {
      position: relative;
      width: 3rem;
      height: 3rem;
      border-radius: 0.75rem;
      background: var(--brand);
      display: grid;
      place-items: center;
      color: white;
      font-weight: 700;
      box-shadow: var(--shadow-md);
      transition: all 0.3s ease;
    }

    .card:hover .icon-box {
      transform: scale(1.05);
      box-shadow: var(--shadow-lg);
    }

    /* Sections */
    section {
      position: relative;
      padding: 5rem 0;
    }

    section:nth-child(even) {
      background: white;
    }

    section:nth-child(odd) {
      background: var(--surface);
    }

    /* Reveal animation */
    .reveal {
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .reveal.show {
      opacity: 1;
      transform: translateY(0);
    }

    /* Floating animation */
    .float {
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    /* Simple grid pattern */
    .hero-grid {
      position: absolute;
      inset: 0;
      background-image: 
        radial-gradient(circle at 20% 10%, rgba(8, 145, 178, .12), transparent 40%), 
        radial-gradient(circle at 80% 30%, rgba(8, 145, 178, .15), transparent 35%), 
        linear-gradient(180deg, rgba(255, 255, 255, .9), rgba(255, 255, 255, .6));
    }

    .grid-lines {
      position: absolute;
      inset: 0;
      background-size: 40px 40px;
      background-image: 
        linear-gradient(to right, var(--grid-color) 1px, transparent 1px), 
        linear-gradient(to bottom, var(--grid-color) 1px, transparent 1px);
      mask-image: radial-gradient(circle at 50% 30%, black 30%, transparent 70%);
    }

    .geo {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    .grid-pattern {
      position: absolute;
      inset: 0;
      background-image: 
        linear-gradient(rgba(8, 145, 178, 0.02) 1px, transparent 1px),
        linear-gradient(90deg, rgba(8, 145, 178, 0.02) 1px, transparent 1px);
      background-size: 40px 40px;
      mask-image: radial-gradient(ellipse 70% 50% at 50% 0%, black 30%, transparent 70%);
    }

    /* Project overlay effect - subtle */
    .project {
      position: relative;
    }

    .project::after {
      content: '';
      position: absolute;
      inset: 0;
      background: var(--brand);
      border-radius: inherit;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }

    .project:hover::after {
      opacity: 0.02;
    }

    /* Enhanced search */
    #search {
      background: white;
      border: 1px solid rgba(15, 23, 42, 0.15);
      border-radius: 0.75rem;
      padding: 0.875rem 1.25rem;
      font-size: 0.9375rem;
      transition: all 0.3s ease;
      outline: none;
      width: 100%;
      max-width: 20rem;
    }

    #search:focus {
      border-color: var(--brand);
      box-shadow: 0 0 0 3px rgba(8, 145, 178, 0.1);
    }

    /* Footer */
    footer {
      background: var(--ink);
      color: #e2e8f0;
      position: relative;
      overflow: hidden;
    }

    footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--brand);
      opacity: 0.6;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 0 1rem;
      }

      section {
        padding: 3rem 0;
      }

      h1 { font-size: 2.5rem !important; }
      h2 { font-size: 1.875rem !important; }

      #search {
        max-width: 100%;
      }
    }

    /* Smooth scrollbar */
    ::-webkit-scrollbar {
      width: 10px;
    }

    ::-webkit-scrollbar-track {
      background: var(--surface);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--brand);
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--brand-dark);
    }

    /* Focus states */
    *:focus-visible {
      outline: 2px solid var(--brand);
      outline-offset: 2px;
    }

    /* Brand text */
    .brand-text {
      color: var(--brand);
      font-weight: 700;
    }

    /* Physics canvas for badges */
    .flex-badges {
      position: relative;
      height: 140px;
      overflow: hidden;
    }

    #physics-canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }

    /* Word cloud */
    #wordcloud {
      background: white;
      border: 1px solid rgba(15, 23, 42, 0.08);
      border-radius: 0.75rem;
    }

    /* Loading shimmer */
    .loading-shimmer {
      background: linear-gradient(90deg, 
        rgba(248, 250, 252, 0) 0%, 
        rgba(248, 250, 252, 0.8) 50%, 
        rgba(248, 250, 252, 0) 100%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header id="site-header">
    <div class="container">
      <div class="flex items-center justify-between py-4">
        <a href="#top" class="font-bold text-xl brand-text tracking-tight">Laio O. Seman</a>
        <nav class="hidden md:flex gap-8 mono">
          <a href="#about">About</a>
          <a href="#interests">Research</a>
          <a href="#latest-papers">Latest Papers</a>
          <a href="#projects">Projects</a>
          <a href="#github">GitHub</a>
          <a href="#publications">Publications</a>
          <a href="#contact">Contact</a>
        </nav>
      </div>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section id="top" class="relative min-h-[100vh] grid place-items-center overflow-hidden">
      <div class="hero-grid"></div>
      <div class="grid-lines"></div>
      <svg class="geo float" width="100%" height="100%" viewBox="0 0 1200 500" fill="none"
        xmlns="http://www.w3.org/2000/svg" style="opacity:.08">
        <defs>
          <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#0891b2" />
            <stop offset="100%" stop-color="#06b6d4" />
          </linearGradient>
        </defs>
        <g stroke="url(#g1)" stroke-width="1.6">
          <polygon points="50,150 150,50 250,100 200,200" />
          <polygon points="520,110 600,70 660,140 620,200 540,180" />
          <polygon points="920,90 1000,60 1080,140 990,180" />
          <path d="M150,50 L600,70 M200,200 L620,200" opacity=".35" />
        </g>
      </svg>

      <div class="container relative z-10">
        <div class="grid lg:grid-cols-2 gap-12 items-center">
          <div class="reveal show">
            <div class="flex flex-wrap gap-2 flex-badges">
              <canvas id="physics-canvas"></canvas>
              <span class="badge badge-fall mono">:{research}</span>
              <span class="badge badge-fall mono">=optimization</span>
              <span class="badge badge-fall mono">>open-source</span>
              <span class="badge badge-fall mono">/ml</span>
            </div>
            
            <h1 class="mb-6">
              Hello, I'm<br>
              <span class="brand-text">Laio O. Seman</span>
            </h1>
            
            <p class="text-xl text-slate-600 mb-6 max-w-xl leading-relaxed">
              Researcher focused on <strong class="text-slate-900">Operations Research</strong> and 
              <strong class="text-slate-900">Machine Learning</strong>, exploring the synergy between 
              optimization and intelligent systems.
            </p>

            <div class="flex items-center gap-3 mb-8">
              <div id="scholar-metrics" class="text-sm text-slate-600 bg-white rounded-lg px-4 py-2 border border-slate-200 shadow-sm">
                <span id="sch-m-status" class="inline-block animate-pulse">Loading metrics…</span>
              </div>
            </div>

            <div class="flex flex-wrap gap-3 mb-8">
              <a href="#projects" class="btn btn-primary">View Projects</a>
              <a href="#publications" class="btn btn-secondary">Publications</a>
              <a href="#contact" class="btn btn-secondary">Get in Touch</a>
            </div>

            <div class="card p-5 mono text-sm bg-slate-900 text-slate-100">
              <div class="flex items-center gap-2 mb-3 text-slate-400">
                <span class="w-2.5 h-2.5 rounded-full bg-red-400"></span>
                <span class="w-2.5 h-2.5 rounded-full bg-yellow-400"></span>
                <span class="w-2.5 h-2.5 rounded-full bg-green-400"></span>
                <span class="ml-2 text-xs">terminal</span>
              </div>
              <div id="demo">
                <span class="text-cyan-400">$</span> 
                <span class="text-slate-300">pip install foreblocks</span>
              </div>
            </div>
          </div>

          <div class="reveal">
            <div class="relative">
              <div class="card p-10 bg-white">
                <div class="relative w-full h-full flex items-center justify-center">
                  <img src="logo.png" alt="Laio O. Seman Logo" class="w-full h-full object-contain opacity-90" style="max-height: 1000px;" />
                  <div class="absolute bg-white border border-slate-200 rounded-xl px-6 py-4 shadow-md text-center" style="bottom: -20px;">
                    <p class="text-sm uppercase tracking-widest text-slate-600 font-semibold mb-1">Optimization × ML</p>
                    <p class="text-xs text-slate-700">Branch-and-Price • Neural Networks • Time Series</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about">
      <div class="container">
        <div class="max-w-5xl mx-auto">
          <h2 class="mb-12 reveal">About</h2>
          <div class="grid md:grid-cols-3 gap-8">
            <div class="md:col-span-2 reveal">
              <p class="text-lg text-slate-700 mb-6 leading-relaxed">
                I'm a researcher and academic with a strong focus on Operations Research and Machine Learning. 
                My work explores principled optimization methods and modern learning techniques to improve 
                decision-making in engineering and real-world systems.
              </p>
              <p class="text-base text-slate-600 leading-relaxed">
                My research interests span the intersection of classical optimization theory with contemporary 
                machine learning, particularly in developing efficient algorithms for large-scale problems and 
                intelligent decision support systems.
              </p>
            </div>
            <div class="card p-8 reveal">
              <h3 class="text-xl font-bold mb-6">Quick Facts</h3>
              <ul class="space-y-4">
                <li class="flex items-center gap-3">
                  <div class="w-2 h-2 bg-brand rounded-full"></div>
                  <span class="text-sm">PhD in Electrical Engineering</span>
                </li>
                <li class="flex items-center gap-3">
                  <div class="w-2 h-2 bg-brand rounded-full"></div>
                  <span class="text-sm">Machine Learning Specialist</span>
                </li>
                <li class="flex items-center gap-3">
                  <div class="w-2 h-2 bg-brand rounded-full"></div>
                  <span class="text-sm">Open Source Contributor</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- RESEARCH -->
    <section id="interests">
      <div class="container">
        <h2 class="mb-12 reveal">Research Interests</h2>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
          <div class="card p-8 project reveal">
            <div class="icon-box mb-6">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
              </svg>
            </div>
            <h3 class="mb-2">Operations Research</h3>
            <p class="text-sm text-slate-500 mb-4">Branch-and-Price, Decomposition, Large-Scale Optimization</p>
            <ul class="space-y-2 text-sm text-slate-600">
              <li>• Algorithm design for complex problems</li>
              <li>• Exact & heuristic methods</li>
              <li>• Efficient implementations</li>
            </ul>
          </div>

          <div class="card p-8 project reveal">
            <div class="icon-box mb-6">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.9.849a3 3 0 01-4.344 0l-.9-.849z"/>
              </svg>
            </div>
            <h3 class="mb-2">Machine Learning</h3>
            <p class="text-sm text-slate-500 mb-4">Optimization-aware ML, Neural OR, Learning to Decide</p>
            <ul class="space-y-2 text-sm text-slate-600">
              <li>• ML at optimization interface</li>
              <li>• Deep learning for decision-making</li>
              <li>• Graph learning & combinatorics</li>
            </ul>
          </div>

          <div class="card p-8 project reveal">
            <div class="icon-box mb-6">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"/>
              </svg>
            </div>
            <h3 class="mb-2">Time Series Forecasting</h3>
            <p class="text-sm text-slate-500 mb-4">Deep Learning, Sequence Modeling, Multi-step Prediction</p>
            <ul class="space-y-2 text-sm text-slate-600">
              <li>• Neural temporal architectures</li>
              <li>• Attention & transformer models</li>
              <li>• Scalable prediction systems</li>
            </ul>
          </div>
        </div>

        <!-- Word Cloud -->
        <div class="card p-8 reveal">
          <div class="flex items-end justify-between gap-4 flex-wrap mb-8">
            <h3 class="text-2xl font-bold">Research Topic Cloud</h3>
            <span id="cloud-status" class="text-sm text-slate-500 bg-slate-100 px-3 py-1 rounded-full">Waiting for publications…</span>
          </div>
          <div class="grid gap-8 md:grid-cols-3">
            <div class="md:col-span-2"><canvas id="wordcloud" class="w-full aspect-[16/9]"></canvas></div>
            <div class="card p-6 bg-slate-50">
              <h4 class="text-lg font-semibold mb-4">Top Terms</h4>
              <ol id="top-terms" class="space-y-3 text-sm"></ol>
              <p class="mt-6 text-xs text-slate-500 bg-white p-3 rounded-lg">Built from titles, abstracts, and keywords across publications.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- LATEST PAPERS -->
    <section id="latest-papers">
      <div class="container">
        <div class="flex items-end justify-between gap-4 flex-wrap mb-12">
          <h2 class="reveal">Latest Papers</h2>
          <span id="latest-status" class="text-sm text-slate-500 bg-white px-3 py-2 rounded-full border border-slate-200">Loading…</span>
        </div>
        <div id="latest-papers-grid" class="grid gap-8 md:grid-cols-2 lg:grid-cols-3 reveal"></div>
      </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects">
      <div class="container">
        <div class="flex items-center justify-between mb-12 flex-wrap gap-4">
          <h2 class="reveal">Projects</h2>
          <input id="search" type="text" placeholder="Search projects..." class="reveal">
        </div>

        <div class="grid md:grid-cols-2 gap-8">
          <article class="card p-8 project reveal" data-search="baldes vehicle routing vrp cvrp vrptw bucket graph labeling algorithm branch cut price operations research c++ optimization">
            <div class="flex items-start justify-between mb-6">
              <div class="flex items-center gap-4">
                <div class="icon-box">
                  <span class="mono text-lg">B</span>
                </div>
                <div>
                  <h3>BALDES</h3>
                  <p class="text-sm text-slate-500">Bucket Graph Labeling</p>
                </div>
              </div>
              <span class="badge mono">2024</span>
            </div>
            <p class="text-slate-600 mb-6 leading-relaxed">
              Modern C++ implementation of Branch-Cut-and-Price bucket graph labeling algorithm 
              for Vehicle Routing Problems with state-of-the-art optimization techniques.
            </p>
            <div class="flex flex-wrap gap-2 mb-6">
              <span class="badge">C++</span>
              <span class="badge">Vehicle Routing</span>
              <span class="badge">Operations Research</span>
            </div>
            <div class="flex gap-3">
              <a href="https://github.com/lseman/baldes" class="btn btn-primary text-sm" target="_blank">GitHub</a>
              <a href="https://lseman.github.io/baldes" class="btn btn-secondary text-sm" target="_blank">Docs</a>
            </div>
          </article>

          <article class="card p-8 project reveal" data-search="foreblocks deep learning time series pytorch forecasting neural networks">
            <div class="flex items-start justify-between mb-6">
              <div class="flex items-center gap-4">
                <div class="icon-box">
                  <span class="mono text-lg">F</span>
                </div>
                <div>
                  <h3>ForeBlocks</h3>
                  <p class="text-sm text-slate-500">Time Series Library</p>
                </div>
              </div>
              <span class="badge mono">2024</span>
            </div>
            <p class="text-slate-600 mb-6 leading-relaxed">
              Flexible and modular PyTorch library for time series forecasting with multiple 
              neural architectures and strategies.
            </p>
            <div class="flex flex-wrap gap-2 mb-6">
              <span class="badge">PyTorch</span>
              <span class="badge">Time Series</span>
              <span class="badge">Deep Learning</span>
            </div>
            <div class="flex gap-3">
              <a href="https://github.com/lseman/foreblocks" class="btn btn-primary text-sm" target="_blank">GitHub</a>
              <a href="https://pypi.org/project/foreblocks/" class="btn btn-secondary text-sm" target="_blank">PyPI</a>
            </div>
          </article>

          <article class="card p-8 project reveal" data-search="ipym interior point method lp linear programming c++ python optimization">
            <div class="flex items-start justify-between mb-6">
              <div class="flex items-center gap-4">
                <div class="icon-box">
                  <span class="mono text-lg">I</span>
                </div>
                <div>
                  <h3>IPyM</h3>
                  <p class="text-sm text-slate-500">Interior Point Method</p>
                </div>
              </div>
              <span class="badge mono">2024</span>
            </div>
            <p class="text-slate-600 mb-6 leading-relaxed">
              Fast C++-based Interior Point Method library with Python bindings 
              tailored for Linear Programming.
            </p>
            <div class="flex flex-wrap gap-2 mb-6">
              <span class="badge">C++</span>
              <span class="badge">Python</span>
              <span class="badge">Optimization</span>
            </div>
            <div class="flex gap-3">
              <a href="https://github.com/lseman/IPyM/" class="btn btn-primary text-sm" target="_blank">GitHub</a>
            </div>
          </article>

          <article class="card p-8 project reveal" data-search="chomp nonlinear programming optimization solver SQP interior-point">
            <div class="flex items-start justify-between mb-6">
              <div class="flex items-center gap-4">
                <div class="icon-box">
                  <span class="mono text-lg">C</span>
                </div>
                <div>
                  <h3>CHOMP</h3>
                  <p class="text-sm text-slate-500">NLP Solver</p>
                </div>
              </div>
              <span class="badge mono">2025</span>
            </div>
            <p class="text-slate-600 mb-6 leading-relaxed">
              Modular Nonlinear Programming solver using SQP, Interior Point, 
              and DFO-L1 strategies.
            </p>
            <div class="flex flex-wrap gap-2 mb-6">
              <span class="badge">C++</span>
              <span class="badge">NLP</span>
              <span class="badge">SQP</span>
            </div>
            <div class="flex gap-3">
              <a href="https://chomp.laioseman.com" class="btn btn-primary text-sm" target="_blank">Website</a>
              <a href="https://github.com/lseman/chomp" class="btn btn-secondary text-sm" target="_blank">GitHub</a>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- GITHUB -->
    <section id="github">
      <div class="container">
        <div class="flex items-end justify-between gap-4 flex-wrap mb-12">
          <h2 class="reveal">GitHub Highlights</h2>
          <span id="gh-status" class="text-sm text-slate-500 bg-white px-3 py-2 rounded-full border border-slate-200">Loading…</span>
        </div>
        <div id="gh-list" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 reveal"></div>
        <div class="mt-12 text-center reveal">
          <a class="btn btn-secondary" href="https://github.com/lseman" target="_blank" rel="noreferrer">View Full GitHub Profile</a>
        </div>
      </div>
    </section>

    <!-- PUBLICATIONS -->
    <section id="publications">
      <div class="container">
        <div class="flex items-center justify-between gap-4 mb-8">
          <h2 class="reveal">Publications</h2>
          <span id="pub-status" class="text-sm text-slate-500 bg-white px-3 py-2 rounded-full border border-slate-200">Loading…</span>
        </div>
        <div class="card p-8 mb-12 reveal">
          <ol id="pub-list" class="space-y-6"></ol>
          <p id="pub-empty" class="text-center text-slate-500 py-8 hidden">No items found.</p>
        </div>
        <div class="mt-12 reveal">
          <a class="card p-8 block group" href="https://scholar.google.com.br/citations?user=PFcaR_MAAAAJ" target="_blank" rel="noreferrer">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-4">
                <div class="icon-box">
                  <span class="font-bold text-sm">GS</span>
                </div>
                <div>
                  <h3 class="text-lg font-semibold group-hover:text-brand transition-colors">Google Scholar Profile</h3>
                  <p class="text-sm text-slate-500">View complete publication list and citation metrics</p>
                </div>
              </div>
              <svg class="w-5 h-5 text-slate-400 group-hover:text-brand transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
              </svg>
            </div>
          </a>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact">
      <div class="container">
        <h2 class="text-center mb-12 reveal">Get in Touch</h2>
        <div class="grid md:grid-cols-3 gap-8 max-w-6xl mx-auto">
          <div class="card p-8 project reveal">
            <div class="icon-box mb-6">
              <span class="text-xl">✉️</span>
            </div>
            <h3 class="mb-2">Email</h3>
            <p class="text-sm mono text-slate-500 mb-4">laio@gos.ufsc.br</p>
            <p class="text-sm text-slate-600 mb-6 leading-relaxed">
              I try to respond promptly to academic and research inquiries.
            </p>
            <a href="mailto:laio@gos.ufsc.br" class="btn btn-primary">Send Email</a>
          </div>

          <div class="card p-8 project reveal">
            <div class="icon-box mb-6">
              <span class="text-xl">🐙</span>
            </div>
            <h3 class="mb-2">GitHub</h3>
            <p class="text-sm mono text-slate-500 mb-4">github.com/lseman</p>
            <p class="text-sm text-slate-600 mb-6 leading-relaxed">
              Code, experiments, and open-source releases.
            </p>
            <a href="https://github.com/lseman" class="btn btn-primary" target="_blank">View Profile</a>
          </div>

          <div class="card p-8 project reveal">
            <div class="icon-box mb-6">
              <span class="text-base font-bold">in</span>
            </div>
            <h3 class="mb-2">LinkedIn</h3>
            <p class="text-sm mono text-slate-500 mb-4">linkedin.com/in/lseman</p>
            <p class="text-sm text-slate-600 mb-6 leading-relaxed">
              Professional networking and career discussions.
            </p>
            <a href="https://www.linkedin.com/in/lseman/" class="btn btn-primary" target="_blank">Connect</a>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="relative mt-20">
    <div class="container py-16 relative z-10">
      <div class="grid md:grid-cols-3 gap-12 mb-12">
        <div>
          <h3 class="text-xl font-bold mb-4 brand-text">Laio O. Seman</h3>
          <p class="text-sm text-slate-400 leading-relaxed">
            Researcher in Operations Research and Machine Learning, exploring the synergy 
            between optimization and intelligent systems.
          </p>
        </div>
        <div>
          <h4 class="font-semibold mb-4 text-slate-300">Quick Links</h4>
          <div class="space-y-2">
            <a href="#about" class="block text-sm text-slate-400 hover:text-cyan-400 transition-colors">About</a>
            <a href="#projects" class="block text-sm text-slate-400 hover:text-cyan-400 transition-colors">Projects</a>
            <a href="#publications" class="block text-sm text-slate-400 hover:text-cyan-400 transition-colors">Publications</a>
            <a href="#contact" class="block text-sm text-slate-400 hover:text-cyan-400 transition-colors">Contact</a>
          </div>
        </div>
        <div>
          <h4 class="font-semibold mb-4 text-slate-300">Connect</h4>
          <div class="flex gap-3">
            <a href="https://github.com/lseman" class="w-12 h-12 bg-slate-800 rounded-lg grid place-items-center hover:bg-slate-700 transition-colors" target="_blank">🐙</a>
            <a href="https://www.linkedin.com/in/lseman/" class="w-12 h-12 bg-slate-800 rounded-lg grid place-items-center hover:bg-slate-700 transition-colors text-white font-bold" target="_blank">in</a>
            <a href="mailto:laio@gos.ufsc.br" class="w-12 h-12 bg-slate-800 rounded-lg grid place-items-center hover:bg-slate-700 transition-colors" target="_blank">✉️</a>
          </div>
        </div>
      </div>
      <div class="pt-8 border-t border-slate-700 flex flex-col sm:flex-row items-center justify-between gap-4">
        <p class="text-sm text-slate-400">© <span id="year"></span> Laio O. Seman. All rights reserved.</p>
        <a href="#top" class="text-sm text-slate-400 hover:text-cyan-400 transition-colors">Back to top ↑</a>
      </div>
    </div>
  </footer>

  <!-- All JavaScript -->
  <script>
    // Badge physics simulation
    document.addEventListener('DOMContentLoaded', function () {
      const { Engine, Render, World, Bodies, Body, Runner } = Matter;
      const container = document.querySelector('.flex-badges');
      const badges = document.querySelectorAll('.badge-fall');
      const canvas = document.getElementById('physics-canvas');
      
      if (!container || badges.length === 0 || !canvas) return;
      
      const containerWidth = container.offsetWidth;
      const containerHeight = container.clientHeight;
      const engine = Engine.create();
      const render = Render.create({
        canvas: canvas,
        engine: engine,
        options: {
          width: containerWidth,
          height: containerHeight,
          wireframes: false,
          background: 'transparent',
        }
      });
      const runner = Runner.create();
      
      const floor = Bodies.rectangle(containerWidth / 2, containerHeight - 10, containerWidth, 20, {
        isStatic: true,
        render: { visible: false }
      });
      const leftWall = Bodies.rectangle(0, containerHeight / 2, 20, containerHeight, {
        isStatic: true,
        render: { visible: false }
      });
      const rightWall = Bodies.rectangle(containerWidth, containerHeight / 2, 20, containerHeight, {
        isStatic: true,
        render: { visible: false }
      });
      
      World.add(engine.world, [floor, leftWall, rightWall]);
      
      const badgeBodies = [];
      badges.forEach((badge, index) => {
        badge.offsetWidth;
        const rectWidth = badge.offsetWidth;
        const rectHeight = badge.offsetHeight;
        const startX = containerWidth * (index + 0.5) / badges.length;
        const startY = -50 - Math.random() * 50;
        
        const body = Bodies.rectangle(startX, startY, rectWidth, rectHeight, {
          restitution: 0.6,
          friction: 0.3,
          frictionAir: 0.01,
          density: 0.001,
          render: { fillStyle: 'transparent' }
        });
        
        Body.setVelocity(body, { x: (Math.random() - 0.5) * 4, y: 0 });
        badgeBodies.push(body);
        World.add(engine.world, body);
      });
      
      Matter.Events.on(engine, 'afterUpdate', () => {
        badgeBodies.forEach((body, index) => {
          const badge = badges[index];
          if (badge) {
            const pos = body.position;
            const angle = body.angle;
            badge.style.left = `${pos.x - (badge.offsetWidth / 2)}px`;
            badge.style.top = `${pos.y - (badge.offsetHeight / 2)}px`;
            badge.style.transform = `rotate(${angle}rad)`;
          }
        });
      });
      
      const observer = new IntersectionObserver((entries) => {
        if (entries[0].isIntersecting) {
          Runner.run(runner, engine);
          Render.run(render);
          observer.disconnect();
        }
      });
      observer.observe(container);
    });

    // Scroll reveal
    const revealElements = document.querySelectorAll('.reveal');
    const revealObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('show');
        }
      });
    }, { threshold: 0.1 });

    revealElements.forEach(el => revealObserver.observe(el));

    // Header scroll effect
    const header = document.getElementById('site-header');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
    });

    // Search functionality
    const searchInput = document.getElementById('search');
    const projectCards = document.querySelectorAll('[data-search]');

    searchInput?.addEventListener('input', (e) => {
      const query = e.target.value.toLowerCase();
      projectCards.forEach(card => {
        const searchText = card.getAttribute('data-search').toLowerCase();
        if (searchText.includes(query)) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    });

    // Year in footer
    const yearSpan = document.getElementById('year');
    if (yearSpan) yearSpan.textContent = new Date().getFullYear();

    // Terminal demo typewriter
    const demo = document.getElementById('demo');
    const lines = [
      '<span class="text-cyan-400">$</span> <span class="text-slate-300">pip install foreblocks</span>',
      '<span class="text-green-400">Successfully installed foreblocks 0.1.0</span>',
      '<span class="text-cyan-400">$</span> <span class="text-slate-300">pip install ipym</span>',
      '<span class="text-green-400">Successfully installed ipym 0.0.1</span>'
    ];
    let idx = 0;
    function typeLine() {
      demo.innerHTML = lines[idx];
      idx = (idx + 1) % lines.length;
    }
    setInterval(typeLine, 3000);

    // Publications, GitHub, Metrics, Word Cloud - Complete Implementation
    let cachedAuthorData = null;

    // Publications loader
    const STATUS = document.getElementById('pub-status');
    const LIST = document.getElementById('pub-list');
    const EMPTY = document.getElementById('pub-empty');
    const LATEST_GRID = document.getElementById('latest-papers-grid');
    const LATEST_STATUS = document.getElementById('latest-status');

    // Fallback data in case APIs are unavailable
    const FALLBACK_PUBLICATIONS = [
      {
        title: "BALDES: A modern C++ Branch-and-Cut-and-Price solver for Vehicle Routing Problems",
        year: 2024,
        venue: "GitHub Repository",
        url: "https://github.com/lseman/baldes",
        authors: ["Laio O. Seman"],
        abstract: "Modern C++ implementation of state-of-the-art bucket graph labeling algorithms for vehicle routing problems.",
        citationCount: null
      },
      {
        title: "ForeBlocks: Modular Deep Learning Library for Time Series Forecasting",
        year: 2024,
        venue: "PyPI Package",
        url: "https://github.com/lseman/foreblocks",
        authors: ["Laio O. Seman"],
        abstract: "Flexible PyTorch-based library for time series forecasting with multiple neural architectures.",
        citationCount: null
      }
    ];

    function truncate(text, maxLength) {
      if (!text) return '';
      return text.length > maxLength ? text.slice(0, maxLength) + '...' : text;
    }

    function renderLatest3(items) {
      if (!LATEST_GRID) return;
      const latest3 = items.sort((a, b) => (b.year || 0) - (a.year || 0)).slice(0, 3);
      
      if (latest3.length === 0) {
        LATEST_GRID.innerHTML = '<p class="text-slate-500 text-center col-span-3 py-8">No papers available</p>';
        if (LATEST_STATUS) LATEST_STATUS.textContent = 'No data';
        return;
      }
      
      LATEST_GRID.innerHTML = latest3.map(p => {
        const venue = [p.venue, p.year].filter(Boolean).join(' · ');
        const abstract = truncate(p.abstract || p.tldr, 200);
        const authors = Array.isArray(p.authors) ? p.authors.slice(0, 3).join(', ') + (p.authors.length > 3 ? ' et al.' : '') : (p.authors || '');
        return `
          <article class="card p-8 group">
            <div class="relative z-10">
              <h3 class="text-xl font-bold mb-3">
                <a class="text-slate-700 hover:text-brand transition-colors" href="${p.url || '#'}" target="_blank">${p.title || 'Untitled'}</a>
              </h3>
              ${venue ? `<p class="text-sm text-slate-500 mb-3 font-medium">${venue}</p>` : ''}
              ${authors ? `<p class="text-xs text-slate-500 mb-4">${authors}</p>` : ''}
              ${abstract ? `<p class="text-sm text-slate-600 leading-relaxed mb-4">${abstract}</p>` : ''}
              ${p.citationCount ? `<div class="inline-flex items-center gap-1 text-xs text-brand bg-cyan-50 px-2 py-1 rounded-full">
                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h4l4 4"/>
                </svg>
                ${p.citationCount} citations
              </div>` : ''}
            </div>
          </article>
        `;
      }).join('');
      if (LATEST_STATUS) LATEST_STATUS.textContent = items.length === FALLBACK_PUBLICATIONS.length ? 'Fallback data' : 'Loaded';
    }

    async function trySemanticScholar() {
      // Check cache first
      const CACHE_KEY = 'semantic_scholar_pubs_v1';
      const CACHE_TTL = 6 * 60 * 60 * 1000; // 6 hours
      
      try {
        const cached = JSON.parse(localStorage.getItem(CACHE_KEY) || 'null');
        if (cached && (Date.now() - cached.timestamp) < CACHE_TTL) {
          console.log('Using cached publications');
          return cached.data;
        }
      } catch (e) {
        console.log('Cache read error:', e);
      }

      const authorQuery = encodeURIComponent('Laio O. Seman');
      const searchUrl = `https://api.semanticscholar.org/graph/v1/author/search?query=${authorQuery}&limit=5&fields=name,affiliations,authorId,citationCount,hIndex`;
      
      try {
        const sr = await fetch(searchUrl, { 
          headers: { 'Accept': 'application/json' },
          signal: AbortSignal.timeout(10000) // 10s timeout
        });
        
        if (sr.status === 429) {
          throw new Error('Rate limited by Semantic Scholar API');
        }
        
        if (!sr.ok) throw new Error('author search failed');
        
        const sj = await sr.json();
        const candidate = (sj?.data || []).find(a => /laio/i.test(a.name || '')) || (sj?.data || [])[0];
        if (!candidate?.authorId) throw new Error('no authorId');
        
        cachedAuthorData = candidate;
        
        const papersUrl = `https://api.semanticscholar.org/graph/v1/author/${candidate.authorId}/papers?limit=20&fields=title,year,venue,url,authors,externalIds,abstract,citationCount`;
        const pr = await fetch(papersUrl, { 
          headers: { 'Accept': 'application/json' },
          signal: AbortSignal.timeout(10000)
        });
        
        if (pr.status === 429) {
          throw new Error('Rate limited by Semantic Scholar API');
        }
        
        if (!pr.ok) throw new Error('papers fetch failed');
        
        const pj = await pr.json();
        const items = (pj?.data || []).map(p => ({
          title: p.title,
          year: p.year,
          venue: p.venue,
          abstract: p.abstract || p.tldr,
          url: p.url || (p.externalIds?.ArXiv ? `https://arxiv.org/abs/${p.externalIds.ArXiv}` : ''),
          authors: (p.authors || []).map(a => a.name),
          citationCount: p.citationCount || null
        }));
        
        // Cache the results
        try {
          localStorage.setItem(CACHE_KEY, JSON.stringify({
            timestamp: Date.now(),
            data: items
          }));
        } catch (e) {
          console.log('Cache write error:', e);
        }
        
        return items;
      } catch (error) {
        console.error('Semantic Scholar API error:', error);
        throw error;
      }
    }

    async function tryLocalPublicationsJson() {
      try {
        const r = await fetch('./publications.json', { 
          cache: 'no-store',
          signal: AbortSignal.timeout(5000)
        });
        if (!r.ok) throw new Error('no local publications.json');
        const j = await r.json();
        return Array.isArray(j) ? j : (j.publications || j.items || []);
      } catch (error) {
        console.log('Local publications.json not found or invalid');
        throw error;
      }
    }

    function renderPublications(items) {
      if (LIST) LIST.innerHTML = '';
      if (!items || !items.length) {
        if (EMPTY) EMPTY.classList.remove('hidden');
        if (STATUS) STATUS.textContent = 'No data';
        return;
      }
      if (EMPTY) EMPTY.classList.add('hidden');
      const top = items.sort((a, b) => (b.year || 0) - (a.year || 0)).slice(0, 8);
      if (LIST) {
        for (const p of top) {
          const li = document.createElement('li');
          li.className = 'pb-6 border-b border-slate-200 last:border-0';
          const authors = Array.isArray(p.authors) ? p.authors.join(', ') : (p.authors || '');
          const abstract = p.abstract || p.tldr || '';
          li.innerHTML = `
            <h3 class="text-lg font-semibold mb-2">
              <a class="text-slate-700 hover:text-brand transition-colors" href="${p.url || '#'}" target="_blank">${p.title || 'Untitled'}</a>
            </h3>
            ${p.venue || p.year ? `<p class="text-sm text-slate-500 mb-2">${p.venue || ''}${p.year ? ` (${p.year})` : ''}</p>` : ''}
            ${authors ? `<p class="text-xs text-slate-600 mb-3">${authors}</p>` : ''}
            ${abstract ? `
              <div data-abstractbox class="text-sm text-slate-600 leading-relaxed mb-3">
                <button type="button" data-toggle="abstract" class="inline-flex items-center gap-1 text-xs text-brand bg-cyan-50 hover:bg-cyan-100 px-2 py-1 rounded-full transition-colors">
                  <span>Abstract</span>
                  <svg class="w-3 h-3 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                  </svg>
                </button>
                <div data-full class="hidden mt-2 text-xs text-slate-700">${abstract}</div>
              </div>
            ` : ''}
            ${p.citationCount ? `<div class="inline-flex items-center gap-1 text-xs text-brand bg-cyan-50 px-2 py-1 rounded-full">
              <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h4l4 4"/>
              </svg>
              ${p.citationCount} citations
            </div>` : ''}
          `;
          LIST.appendChild(li);
        }
      }
      LIST.addEventListener('click', (e) => {
        const btn = e.target.closest('[data-toggle="abstract"]');
        if (!btn) return;
        const box = btn.closest('[data-abstractbox]');
        const fullEl = box.querySelector('[data-full]');
        const arrow = btn.querySelector('svg');
        fullEl.classList.toggle('hidden');
        arrow.classList.toggle('rotate-180');
      });
      if (STATUS) STATUS.textContent = 'Loaded';
      renderLatest3(items);
      buildAndRenderCloudFrom(items);
    }

    // GitHub loader
    const GH_STATUS = document.getElementById('gh-status');
    const GH_LIST = document.getElementById('gh-list');

    function renderRepos(repos) {
      if (!GH_LIST) return;
      GH_LIST.innerHTML = '';
      if (!repos || !repos.length) {
        if (GH_STATUS) GH_STATUS.textContent = 'No repositories';
        return;
      }
      const top = repos.filter(r => !r.fork).sort((a, b) => (b.stargazers_count || 0) - (a.stargazers_count || 0)).slice(0, 6);
      for (const r of top) {
        const card = document.createElement('article');
        card.className = 'card p-6 group';
        card.innerHTML = `
          <div class="relative z-10">
            <div class="flex items-start justify-between gap-3 mb-3">
              <h3 class="text-lg font-semibold">
                <a class="text-slate-700 hover:text-brand transition-colors" href="${r.html_url}" target="_blank">${r.name}</a>
              </h3>
              <div class="text-xs flex items-center gap-1 text-slate-600 bg-slate-100 px-2 py-1 rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-3 w-3">
                  <path d="M12 .587l3.668 7.431L24 9.753l-6 5.847 1.416 8.263L12 19.771l-7.416 4.092L6 15.6 0 9.753l8.332-1.735z"/>
                </svg>
                ${r.stargazers_count || 0}
              </div>
            </div>
            <p class="text-sm text-slate-600 leading-relaxed mb-4">${r.description || 'No description available'}</p>
            <div class="flex items-center gap-4 text-xs text-slate-500">
              ${r.language ? `<span class="inline-flex items-center gap-1"><span class="h-2 w-2 rounded-full inline-block bg-neutral-400"></span>${r.language}</span>` : ''}
            </div>
          </div>
        `;
        GH_LIST.appendChild(card);
      }
      if (GH_STATUS) GH_STATUS.textContent = 'Loaded';
    }

    async function tryGitHubAPI() {
      // Check cache first
      const CACHE_KEY = 'github_repos_v1';
      const CACHE_TTL = 1 * 60 * 60 * 1000; // 1 hour
      
      try {
        const cached = JSON.parse(localStorage.getItem(CACHE_KEY) || 'null');
        if (cached && (Date.now() - cached.timestamp) < CACHE_TTL) {
          console.log('Using cached GitHub repos');
          return cached.data;
        }
      } catch (e) {
        console.log('Cache read error:', e);
      }

      const url = `https://api.github.com/users/lseman/repos?per_page=100&sort=updated`;
      
      try {
        const r = await fetch(url, { 
          headers: { 'Accept': 'application/vnd.github+json' },
          signal: AbortSignal.timeout(10000)
        });
        
        if (r.status === 429 || r.status === 403) {
          throw new Error('Rate limited by GitHub API');
        }
        
        if (!r.ok) throw new Error('github api failed');
        
        const data = await r.json();
        
        // Cache the results
        try {
          localStorage.setItem(CACHE_KEY, JSON.stringify({
            timestamp: Date.now(),
            data: data
          }));
        } catch (e) {
          console.log('Cache write error:', e);
        }
        
        return data;
      } catch (error) {
        console.error('GitHub API error:', error);
        throw error;
      }
    }

    // Scholar metrics
    (async function loadScholarMetrics() {
      const MOUNT = document.getElementById('scholar-metrics');
      const METRICS_STATUS = document.getElementById('sch-m-status');
      if (!MOUNT) return;

      const CACHE_KEY = 'scholar_metrics_cache_v1';
      const TTL_MS = 24 * 60 * 60 * 1000;

      function render({ hIndex, citationCount, paperCount }) {
        const parts = [];
        if (citationCount != null) parts.push(`Citations: <strong>${citationCount.toLocaleString?.() ?? citationCount}</strong>`);
        if (hIndex != null) parts.push(`h-index: <strong>${hIndex}</strong>`);
        if (paperCount != null) parts.push(`Papers: <strong>${paperCount}</strong>`);
        MOUNT.innerHTML = parts.length > 0 ? parts.join(' • ') : 'Scholar metrics loading...';
      }

      try {
        const cached = JSON.parse(localStorage.getItem(CACHE_KEY) || 'null');
        if (cached && (Date.now() - cached.ts) < TTL_MS) {
          render(cached.data);
          return;
        }
      } catch { }

      // Wait for author data from publications fetch
      await new Promise(resolve => setTimeout(resolve, 500));

      async function getAuthorDetails(id) {
        const url = `https://api.semanticscholar.org/graph/v1/author/${id}?fields=name,url,citationCount,hIndex,paperCount`;
        const r = await fetch(url, { 
          headers: { Accept: 'application/json' },
          signal: AbortSignal.timeout(10000)
        });
        if (r.status === 429) throw new Error('Rate limited');
        if (!r.ok) throw new Error('author details failed');
        return await r.json();
      }

      try {
        if (METRICS_STATUS) METRICS_STATUS.textContent = 'Loading metrics...';
        if (cachedAuthorData && cachedAuthorData.authorId) {
          try {
            const detail = await getAuthorDetails(cachedAuthorData.authorId);
            const data = {
              hIndex: detail.hIndex ?? cachedAuthorData.hIndex ?? null,
              citationCount: detail.citationCount ?? cachedAuthorData.citationCount ?? null,
              paperCount: detail.paperCount ?? null
            };
            render(data);
            try { localStorage.setItem(CACHE_KEY, JSON.stringify({ ts: Date.now(), data })); } catch { }
          } catch (apiError) {
            // Use cached author data if API fails
            if (cachedAuthorData.hIndex || cachedAuthorData.citationCount) {
              render({
                hIndex: cachedAuthorData.hIndex,
                citationCount: cachedAuthorData.citationCount,
                paperCount: null
              });
            } else {
              throw apiError;
            }
          }
        } else {
          if (METRICS_STATUS) METRICS_STATUS.textContent = 'Metrics unavailable';
        }
      } catch (error) {
        console.log('Scholar metrics error:', error.message);
        if (METRICS_STATUS) METRICS_STATUS.textContent = 'Metrics temporarily unavailable';
      }
    })();

    // Word cloud
    const CLOUD_STATUS = document.getElementById('cloud-status');
    const TOP_TERMS_OL = document.getElementById('top-terms');

    const STOP = new Set('a,an,and,are,as,at,be,by,for,from,has,have,in,is,its,of,on,or,that,the,to,was,were,with,via,using,into,through,do,does,did,not,can,could,may,might,will,would,should,we,you,they,our,this,these,those,over,under,between,within'.split(','));

    function buildCorpus(items) {
      return items.map(p => [p.title, p.abstract, p.tldr].filter(Boolean).join(' ')).join(' ');
    }

    function computeFrequencies(text) {
      const counts = new Map();
      const tokens = (text.match(/[A-Za-zÀ-ÖØ-öø-ÿ0-9\-]+/g) || []).map(t => t.toLowerCase());
      for (const tok of tokens) {
        if (tok.length < 3 || STOP.has(tok)) continue;
        counts.set(tok, (counts.get(tok) || 0) + 1);
      }
      return counts;
    }

    function topN(counts, n = 30) {
      return Array.from(counts.entries()).filter(([, c]) => c >= 2).sort((a, b) => b[1] - a[1]).slice(0, n);
    }

    function renderTopTerms(list, data) {
      if (!list) return;
      list.innerHTML = '';
      for (const [term, count] of data.slice(0, 15)) {
        const li = document.createElement('li');
        li.innerHTML = `<span class="inline-block px-2 py-0.5 rounded-full border border-neutral-200 me-2 text-xs">${count}</span>${term}`;
        list.appendChild(li);
      }
    }

    function renderWordCloud(pairs) {
      const canvas = document.getElementById('wordcloud');
      if (!canvas || !window.WordCloud) return;
      const rect = canvas.getBoundingClientRect();
      const ratio = window.devicePixelRatio || 1;
      canvas.width = rect.width * ratio;
      canvas.height = rect.height * ratio;
      const ctx = canvas.getContext("2d");
      ctx.setTransform(ratio, 0, 0, ratio, 0, 0);
      const max = pairs.length ? Math.max(...pairs.map(([, w]) => w)) : 1;
      const list = pairs.map(([t, w]) => [t, Math.max(8, Math.round(8 + 40 * (w / max)))]);
      WordCloud(canvas, {
        list,
        gridSize: Math.round(8 * ratio),
        shrinkToFit: true,
        drawOutOfBound: false,
        backgroundColor: 'transparent',
        origin: [rect.width / 2, rect.height / 2],
        color: () => '#0891b2',
      });
    }

    function buildAndRenderCloudFrom(items) {
      try {
        if (CLOUD_STATUS) CLOUD_STATUS.textContent = 'Building…';
        const corpus = buildCorpus(items);
        const counts = computeFrequencies(corpus);
        const pairs = topN(counts, 60);
        renderTopTerms(TOP_TERMS_OL, pairs);
        renderWordCloud(pairs);
        if (CLOUD_STATUS) CLOUD_STATUS.textContent = 'Loaded';
      } catch {
        if (CLOUD_STATUS) CLOUD_STATUS.textContent = 'Unavailable';
      }
    }

    // Initialize loaders
    (async () => {
      try {
        if (STATUS) STATUS.textContent = 'Loading from cache...';
        const items = await trySemanticScholar();
        if (STATUS) STATUS.textContent = 'Loaded from Semantic Scholar';
        renderPublications(items);
      } catch (e1) {
        console.log('Semantic Scholar failed:', e1.message);
        try {
          if (STATUS) STATUS.textContent = 'Trying local file...';
          const items = await tryLocalPublicationsJson();
          if (STATUS) STATUS.textContent = 'Loaded from local file';
          renderPublications(items);
        } catch (e2) {
          console.log('Local file failed:', e2.message);
          if (STATUS) {
            const msg = document.createElement('div');
            msg.className = 'text-sm bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4';
            msg.innerHTML = `
              <p class="font-semibold mb-2">📝 Note: Using fallback publication data</p>
              <p class="text-xs text-slate-600">The Semantic Scholar API is temporarily unavailable (rate limited). 
              To avoid this, create a <code class="bg-slate-100 px-1 rounded">publications.json</code> file in the same directory. 
              Data will be cached for 6 hours after the first successful load.</p>
            `;
            const container = document.querySelector('#publications .card');
            if (container) container.insertBefore(msg, container.firstChild);
            STATUS.textContent = 'Using fallback data';
          }
          renderPublications(FALLBACK_PUBLICATIONS);
        }
      }
    })();

    (async () => {
      try {
        if (GH_STATUS) GH_STATUS.textContent = 'Loading repositories...';
        const repos = await tryGitHubAPI();
        renderRepos(repos);
        
        // Check if we used cache
        try {
          const cached = JSON.parse(localStorage.getItem('github_repos_v1') || 'null');
          const CACHE_TTL = 1 * 60 * 60 * 1000;
          if (cached && (Date.now() - cached.timestamp) < CACHE_TTL) {
            if (GH_STATUS) GH_STATUS.textContent = 'Loaded (cached)';
          } else {
            if (GH_STATUS) GH_STATUS.textContent = 'Loaded';
          }
        } catch {}
      } catch (e) {
        console.log('GitHub API failed:', e.message);
        if (GH_STATUS) {
          GH_STATUS.textContent = 'Temporarily unavailable';
          GH_STATUS.className = GH_STATUS.className.replace('text-slate-500', 'text-orange-600');
        }
        
        // Try to show a helpful message
        const section = document.getElementById('github');
        if (section) {
          const msg = document.createElement('div');
          msg.className = 'text-sm bg-orange-50 border border-orange-200 rounded-lg p-4 mb-8 max-w-2xl';
          msg.innerHTML = `
            <p class="font-semibold mb-1">⚠️ GitHub API temporarily unavailable</p>
            <p class="text-xs text-slate-600">This usually means rate limiting. The page will use cached data if available, or try again later.</p>
          `;
          const container = section.querySelector('.container');
          if (container && container.children[1]) {
            container.insertBefore(msg, container.children[1]);
          }
        }
      }
    })();

    // Navigation highlight
    (function () {
      const header = document.getElementById('site-header');
      const links = Array.from(document.querySelectorAll('header nav a[href^="#"]'));
      const secs = links.map(a => document.getElementById(a.getAttribute('href').slice(1))).filter(Boolean);

      if (!header || !links.length || !secs.length) return;

      const setActive = (id) => {
        const current = document.querySelector('header nav a[aria-current="page"]');
        const newActive = document.querySelector(`header nav a[href="#${CSS.escape(id)}"]`);
        if (current === newActive) return;
        if (current) current.removeAttribute('aria-current');
        if (newActive) newActive.setAttribute('aria-current', 'page');
      };

      const pickMostVisible = () => {
        const topPad = header.offsetHeight + 16;
        let bestSection = null;
        let bestScore = -Infinity;

        for (const section of secs) {
          const rect = section.getBoundingClientRect();
          const vh = window.innerHeight;
          if (rect.bottom < topPad || rect.top > vh) continue;
          const visibleTop = Math.max(rect.top, topPad);
          const visibleBottom = Math.min(rect.bottom, vh);
          const visibleHeight = Math.max(0, visibleBottom - visibleTop);
          if (visibleHeight <= 0) continue;
          const score = visibleHeight / rect.height * 2 - Math.abs((rect.top + rect.bottom) / 2 - vh / 2) / vh * 0.5;
          if (score > bestScore) {
            bestScore = score;
            bestSection = section;
          }
        }
        if (bestSection) setActive(bestSection.id);
      };

      window.addEventListener('scroll', () => {
        clearTimeout(window.scrollTimeout);
        window.scrollTimeout = setTimeout(pickMostVisible, 100);
      }, { passive: true });
    })();
  </script>
</body>
</html>